webpackJsonp([24],{1209:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var u=t[o](a),i=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ResetPassword=void 0;var c,s,l=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),h=n(115),m=n(185),v=n(1251),y=n(1218),b=r(y),_=n(1217),w=r(_),P=t.ResetPassword=(c=(0,m.connect)(function(e,t){return{}},function(e){return{updatePassword:(0,h.bindActionCreators)(v.updatePassword,e)}}))(s=function(e){function t(e){a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.submit=n.submit.bind(n),n}return i(t,e),f(t,[{key:"componentDidMount",value:function(){this.refs.currentPassword.focus()}},{key:"submit",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,r,o,a,u,i,c,s,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,n=this.props.updatePassword,r=this.refs,o=r.currentPassword,a=r.newPassword,u=r.confirmNewPassword,o.value){e.next=5;break}return e.abrupt("return",o.focus());case 5:if(a.value){e.next=7;break}return e.abrupt("return",a.focus());case 7:if(u.value){e.next=9;break}return e.abrupt("return",u.focus());case 9:if(a.value==u.value){e.next=12;break}return alert("新密码两次输入不相同"),e.abrupt("return");case 12:return e.next=14,n({current_password:o.value,new_password:a.value});case 14:i=e.sent,c=l(i,2),s=c[0],f=c[1],f&&f.success?(Toastify({text:"密码修改成功",duration:3e3,backgroundColor:"linear-gradient(to right, #18c31a, #14a22f)"}).showToast(),o.value="",a.value="",u.value=""):Toastify({text:s,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast();case 19:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(w.default,{title:"修改密码"}),d.default.createElement("div",{className:"card"},d.default.createElement("div",{className:"card-header"},"修改密码"),d.default.createElement("div",{className:"card-body",style:{padding:"20px"}},d.default.createElement("div",{className:"form-group"},d.default.createElement("input",{type:"password",className:"form-control",placeholder:"当前密码",ref:"currentPassword"})),d.default.createElement("div",{className:"form-group"},d.default.createElement("input",{type:"password",className:"form-control",placeholder:"新密码",ref:"newPassword"})),d.default.createElement("div",{className:"form-group"},d.default.createElement("input",{type:"password",className:"form-control",placeholder:"重复新密码",ref:"confirmNewPassword"})),d.default.createElement("a",{className:"btn btn-primary",href:"javascript:void(0);",onClick:this.submit},"提交"))))}}]),t}(p.Component))||s;t.default=(0,b.default)(P)},1217:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Meta=void 0;var i,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=r(l),p=n(489),d=r(p),h=(n(115),n(185)),m=n(286),v=n(117),y=t.Meta=(i=(0,h.connect)(function(e,t){return{unreadNotice:(0,m.getUnreadNotice)(e)}},function(e){return{}}))(c=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),s(t,[{key:"render",value:function(){var e={},t=this.props,n=t.title,r=t.description,o=t.canonical,a=t.meta,u=t.link,i=t.unreadNotice;return e.title=n?n+" - "+v.name:v.name,r&&(e.description=r),o&&(e.canonical=o),a&&(e.meta=a),u&&(e.link=u),i&&i.length>0&&(e.title="("+i.length+"条通知) "+e.title),f.default.createElement(d.default,null,f.default.createElement("title",null,i&&i.length>0?"("+i.length+"条通知)":"",n||v.name,n?" - "+v.name:""),this.props.children)}}]),t}(l.Component))||c;t.default=y},1218:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var u=t[o](a),i=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=r(l),p=n(115),d=n(185),h=n(1219),m=n(1220),v=n(488),y=r(v),b=n(487),_=r(b),w=function(e){var t,n,r;return e.loadData||(e.loadData=function(e){e.store,e.match;return new Promise(function(){var e=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({code:200});case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())}),(0,d.connect)(function(e,t){return{}},function(e){return{saveScrollPosition:(0,p.bindActionCreators)(h.saveScrollPosition,e),setScrollPosition:(0,p.bindActionCreators)(h.setScrollPosition,e),addVisitHistory:(0,p.bindActionCreators)(m.addVisitHistory,e)}})((r=n=function(t){function n(e){o(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={notFoundPgae:""},t}return u(n,t),s(n,[{key:"componentWillMount",value:function(){var e=this.props.location,t=(e.pathname,e.search);if(this.props.location.params=t?(0,_.default)(t):{},this.props.staticContext){var n=this.props.staticContext,r=n.code,o=n.text;404==r&&(this.state.notFoundPgae=o||"404 NOT FOUND")}}},{key:"componentDidMount",value:function(){var e=this.props.location,t=e.pathname,n=e.search;this.props.setScrollPosition(t+n),this.props.addVisitHistory(t+n)}},{key:"componentWillReceiveProps",value:function(e){this.props.location.pathname+this.props.location.search!=e.location.pathname+e.location.search&&(this.componentWillUnmount(),this.props=e,this.componentDidMount())}},{key:"componentWillUnmount",value:function(){var e=this.props.location,t=e.pathname,n=e.search;this.props.saveScrollPosition(t+n)}},{key:"render",value:function(){var t=this,n=this.state.notFoundPgae;return f.default.createElement("div",{className:"container"},n?f.default.createElement("div",null,n):f.default.createElement(e,c({},this.props,{notFoundPgae:function(e){t.setState({notFoundPgae:e||"404 NOT FOUND"})}})))}}]),n}(f.default.Component),n.defaultProps={loadData:function(t){var n=t.store,r=t.match;return new Promise(function(t,o){var a=[];y.default.loadData&&a.push(y.default.loadData({store:n,match:r})),e.loadData&&a.push(e.loadData({store:n,match:r})),Promise.all(a).then(function(n){t(e.loadData?n[n.length-1]:{code:200})})})}},t=r))||t};t.default=w},1219:function(e,t,n){"use strict";function r(e){return function(t,n){t({type:"SET_SCROLL_POSITION",name:e})}}function o(e){return function(t,n){t({type:"SAVE_SCROLL_POSITION",name:e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.setScrollPosition=r,t.saveScrollPosition=o},1220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.addVisitHistory=function(e){return function(t){t({type:"ADD_HISTORY",page:e})}}},1251:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var u=t[o](a),i=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}function o(e){var t=e.accessToken;return function(e,n){e({type:"ADD_ACCESS_TOKEN",accessToken:t})}}function a(){return{type:"REMOVE_ACCESS_TOKEN"}}function u(e){var t=this;return function(){var n=r(regeneratorRuntime.mark(function n(o,a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r){var o,u,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._id=a().user.profile._id,t.next=3,(0,l.default)({type:"mutation",api:"updateUser",args:e,fields:"\n          success\n        ",headers:{accessToken:a().user.accessToken}});case 3:o=t.sent,u=c(o,2),i=u[0],s=u[1],r([i,s]);case 8:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()}function i(e){var t=this;return function(){var n=r(regeneratorRuntime.mark(function n(o,a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r){var o,u,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.user_id=a().user.profile._id,t.next=3,(0,l.default)({type:"mutation",api:"updatePassword",args:e,fields:"\n          success\n        ",headers:{accessToken:a().user.accessToken}});case 3:o=t.sent,u=c(o,2),i=u[0],s=u[1],r([i,s]);case 8:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()}Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserInfo=void 0;var c=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.addAccessToken=o,t.removeAccessToken=a,t.updateUser=u,t.updatePassword=i;var s=n(116),l=function(e){return e&&e.__esModule?e:{default:e}}(s);t.loadUserInfo=function(e){var t=e.accessToken,n=void 0===t?null:t;return function(e,t){return new Promise(function(){var o=r(regeneratorRuntime.mark(function r(o,a){var u,i,s,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=n||t().user.accessToken,r.next=3,(0,l.default)({api:"selfInfo",args:{},fields:"\n        _id\n        nickname_reset_at\n        create_at\n        last_sign_at\n        blocked\n        role\n        avatar\n        brief\n        source\n        posts_count\n        comment_count\n        fans_count\n        like_count\n        follow_people_count\n        follow_topic_count\n        follow_posts_count\n        block_people_count\n        block_posts_count\n        block_comment_count\n        gender\n        nickname\n        banned_to_post\n        avatar_url\n        email\n        weibo\n        qq\n        github\n        phone\n        area_code\n        find_notification_at\n        last_find_posts_at\n        ",headers:{accessToken:n}});case 3:u=r.sent,i=c(u,2),s=i[0],f=i[1],s?o([s]):(e({type:"SET_USER",userinfo:f}),o([null,f]));case 8:case"end":return r.stop()}},r,void 0)}));return function(e,t){return o.apply(this,arguments)}}())}}}});