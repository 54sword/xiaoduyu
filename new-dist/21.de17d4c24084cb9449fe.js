webpackJsonp([21],{1204:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var i,u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(1),p=a(f),d=n(136),m=n(115),h=n(185),b=n(501),v=n(186),y=n(1218),E=a(y),g=n(1217),_=a(g),w=n(492),O=n(135),N=a(O),k=n(1319),P=a(k),j=t.Settings=(i=(0,h.connect)(function(e,t){return{me:(0,v.getProfile)(e)}},function(e){return{signOut:(0,m.bindActionCreators)(b.signOut,e)}}),u=(0,N.default)(P.default),i(c=u(c=function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSignout=n.handleSignout.bind(n),n}return r(t,e),s(t,[{key:"handleSignout",value:function(){this.props.signOut({callback:function(){location.href="/"}})}},{key:"render",value:function(){var e=this.props.me,t=p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/nickname"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"修改名字"),p.default.createElement("span",null,e.nickname))),n=(0,w.Countdown)(new Date,e.nickname_reset_at),a="";n.days>0&&(a+=n.days+"天"),n.hours>0&&(a+=n.hours+"小时"),n.mintues>0&&(a+=n.mintues+"分钟"),a&&(t=p.default.createElement("a",{className:"list-group-item",href:"javascript:void(0);"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"修改名字"),p.default.createElement("span",null,e.nickname," (",a,"后才能修改)"))));var l=p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/email"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"邮箱"),p.default.createElement("span",null,e.email||"未绑定"))),o=p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/binding-phone"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"手机号"),p.default.createElement("span",null,e.phone||"未绑定")));return p.default.createElement("div",null,p.default.createElement(_.default,{title:"设置"}),p.default.createElement("div",{styleName:"main"},p.default.createElement("div",{className:"list-group mb-2"},p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/avatar"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"头像"),p.default.createElement("span",null,p.default.createElement("img",{src:e.avatar_url,styleName:"avatar"})))),t,p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/gender"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"性别"),p.default.createElement("span",null,void 0!==e.gender?1==e.gender?"男":"女":""))),p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/brief"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"个性签名"),p.default.createElement("span",null,e.brief)))),p.default.createElement("div",{className:"list-group mb-2"},e.email?p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/password"},"修改密码"):null),p.default.createElement("div",{className:"list-group mb-2"},l,o,p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/oauth/qq"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"QQ"),p.default.createElement("span",null,e.qq?"已绑定":"未绑定"))),p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/oauth/weibo"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"微博"),p.default.createElement("span",null,e.weibo?"已绑定":"未绑定"))),p.default.createElement(d.Link,{className:"list-group-item",to:"/settings/oauth/github"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"GitHub"),p.default.createElement("span",null,e.github?"已绑定":"未绑定")))),p.default.createElement("div",{className:"list-group mb-2"},e.block_people_count>0?p.default.createElement(d.Link,{className:"list-group-item",to:"/block/peoples"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"你不感兴趣的用户"),p.default.createElement("span",null,e.block_people_count," 个人"))):null,e.block_posts_count>0?p.default.createElement(d.Link,{className:"list-group-item",to:"/block/posts"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"你不感兴趣的帖子"),p.default.createElement("span",null,e.block_posts_count," 个帖子"))):null,e.block_comment_count>0?p.default.createElement(d.Link,{className:"list-group-item",to:"/block/comments"},p.default.createElement("div",{className:"d-flex justify-content-between"},p.default.createElement("span",null,"你不感兴趣的评论"),p.default.createElement("span",null,e.block_comment_count," 个评论"))):null)))}}]),t}(f.Component))||c)||c);t.default=(0,E.default)(j)},1217:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Meta=void 0;var i,u,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),f=a(s),p=n(489),d=a(p),m=(n(115),n(185)),h=n(286),b=n(117),v=t.Meta=(i=(0,m.connect)(function(e,t){return{unreadNotice:(0,h.getUnreadNotice)(e)}},function(e){return{}}))(u=function(e){function t(e){return l(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),c(t,[{key:"render",value:function(){var e={},t=this.props,n=t.title,a=t.description,l=t.canonical,o=t.meta,r=t.link,i=t.unreadNotice;return e.title=n?n+" - "+b.name:b.name,a&&(e.description=a),l&&(e.canonical=l),o&&(e.meta=o),r&&(e.link=r),i&&i.length>0&&(e.title="("+i.length+"条通知) "+e.title),f.default.createElement(d.default,null,f.default.createElement("title",null,i&&i.length>0?"("+i.length+"条通知)":"",n||b.name,n?" - "+b.name:""),this.props.children)}}]),t}(s.Component))||u;t.default=v},1218:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(l,o){try{var r=t[l](o),i=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),f=a(s),p=n(115),d=n(185),m=n(1219),h=n(1220),b=n(488),v=a(b),y=n(487),E=a(y),g=function(e){var t,n,a;return e.loadData||(e.loadData=function(e){e.store,e.match;return new Promise(function(){var e=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({code:200});case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())}),(0,d.connect)(function(e,t){return{}},function(e){return{saveScrollPosition:(0,p.bindActionCreators)(m.saveScrollPosition,e),setScrollPosition:(0,p.bindActionCreators)(m.setScrollPosition,e),addVisitHistory:(0,p.bindActionCreators)(h.addVisitHistory,e)}})((a=n=function(t){function n(e){l(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={notFoundPgae:""},t}return r(n,t),c(n,[{key:"componentWillMount",value:function(){var e=this.props.location,t=(e.pathname,e.search);if(this.props.location.params=t?(0,E.default)(t):{},this.props.staticContext){var n=this.props.staticContext,a=n.code,l=n.text;404==a&&(this.state.notFoundPgae=l||"404 NOT FOUND")}}},{key:"componentDidMount",value:function(){var e=this.props.location,t=e.pathname,n=e.search;this.props.setScrollPosition(t+n),this.props.addVisitHistory(t+n)}},{key:"componentWillReceiveProps",value:function(e){this.props.location.pathname+this.props.location.search!=e.location.pathname+e.location.search&&(this.componentWillUnmount(),this.props=e,this.componentDidMount())}},{key:"componentWillUnmount",value:function(){var e=this.props.location,t=e.pathname,n=e.search;this.props.saveScrollPosition(t+n)}},{key:"render",value:function(){var t=this,n=this.state.notFoundPgae;return f.default.createElement("div",{className:"container"},n?f.default.createElement("div",null,n):f.default.createElement(e,u({},this.props,{notFoundPgae:function(e){t.setState({notFoundPgae:e||"404 NOT FOUND"})}})))}}]),n}(f.default.Component),n.defaultProps={loadData:function(t){var n=t.store,a=t.match;return new Promise(function(t,l){var o=[];v.default.loadData&&o.push(v.default.loadData({store:n,match:a})),e.loadData&&o.push(e.loadData({store:n,match:a})),Promise.all(o).then(function(n){t(e.loadData?n[n.length-1]:{code:200})})})}},t=a))||t};t.default=g},1219:function(e,t,n){"use strict";function a(e){return function(t,n){t({type:"SET_SCROLL_POSITION",name:e})}}function l(e){return function(t,n){t({type:"SAVE_SCROLL_POSITION",name:e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.setScrollPosition=a,t.saveScrollPosition=l},1220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.addVisitHistory=function(e){return function(t){t({type:"ADD_HISTORY",page:e})}}},1319:function(e,t){e.exports={main:"g5y4TLnS",avatar:"AYL1HPKx"}}});