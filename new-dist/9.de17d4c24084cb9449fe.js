webpackJsonp([9],{1188:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=(n(115),n(185)),p=n(186),m=n(1289),h=r(m),y=n(1295),v=r(y),b=n(1296),g=r(b),_=n(1298),w=r(_),k=n(1300),E=r(k),C=(u=(0,d.connect)(function(e,t){return{me:(0,p.getProfile)(e)}},function(e){return{}}))(c=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.me;return f.default.createElement("div",null,e?null:f.default.createElement(h.default,null),e?f.default.createElement(v.default,null):null,e?f.default.createElement(g.default,null):null,e?f.default.createElement(w.default,null):null,e?f.default.createElement(E.default,null):null)}}]),t}(s.Component))||c;t.default=C},1221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=function(){this.devices={1:"unknow",2:"windows",3:"mac",4:"ipad",5:"iphone",6:"android"},this.show={1:"",2:"",3:"",4:"来自 iPad",5:"来自 iPhone",6:"来自 Android"}};return e.prototype.getCurrentDeviceId=function(){if("undefined"==typeof window||"undefined"==typeof document)return 1;var e="unknow",t=navigator.platform,n=navigator.userAgent.toLowerCase(),r={windows:0==t.indexOf("Win"),mac:0==t.indexOf("Mac"),ipad:"ipad"==n.match(/ipad/i),iphone:"iphone os"==n.match(/iphone os/i),android:"android"==n.match(/android/i)};for(var a in r)r[a]&&(e=a);for(var a in this.devices)if(this.devices[a]==e)return a;return 1},e.prototype.getNameByDeviceId=function(e){return this.show[e]},e.prototype.isMobileDevice=function(){var e=this.getCurrentDeviceId();return 5==e||6==e},new e}();t.default=r},1222:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e){var t=this,n=e.posts_id,r=e.parent_id,o=e.reply_id,u=e.contentJSON,l=e.contentHTML,s=e.deviceId;e.callback;return function(e,f){var d=(f().user.accessToken,f().comment),m=f().posts;return new Promise(function(){var h=a(regeneratorRuntime.mark(function a(h){var y,v,b,g,_,w,k,E,C;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.default)({type:"mutation",api:"addComment",args:{posts_id:n,parent_id:r,reply_id:o,content:u,content_html:l,device:s},fields:"\n          success\n          _id\n        ",headers:{accessToken:f().user.accessToken}});case 2:if(y=t.sent,v=c(y,2),b=v[0],g=v[1],h([b,g]),g&&g.success){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,i({name:"cache",filters:{query:{_id:g._id}},restart:!0})(e,f);case 11:_=t.sent,w=c(_,2),b=w[0],g=w[1],k=g.data[0];for(E in d)E==n?k.parent_id?d[E].data.map(function(e){e._id==k.parent_id&&e.reply.push(k)}):d[E].data.push(k):E==r&&d[E].data.push(k);if(e({type:"SET_COMMENT",state:d}),!r){for(C in m)m[C].data.map(function(e){e._id==n&&(e.comment_count=e.comment_count?e.comment_count+1:1)});e({type:"SET_POSTS",state:m})}case 19:case"end":return t.stop()}},a,t)}));return function(e){return h.apply(this,arguments)}}())}}function i(e){var t=e.name,n=e.filters,r=void 0===n?{}:n,a=e.restart,o=void 0!==a&&a;return function(e,n){return r.select||(r.select="\n        content_html\n        create_at\n        reply_count\n        like_count\n        device\n        ip\n        blocked\n        deleted\n        verify\n        weaken\n        recommend\n        _id\n        update_at\n        like\n        user_id {\n          _id\n          nickname\n          brief\n          avatar_url\n        }\n        posts_id{\n          _id\n          title\n        }\n        parent_id\n        reply_id {\n          _id\n          user_id{\n            _id\n            nickname\n            brief\n            avatar_url\n          }\n        }\n        reply {\n          _id\n          user_id {\n            _id\n            nickname\n            brief\n            avatar\n            avatar_url\n          }\n          posts_id\n          parent_id\n          reply_id {\n            user_id {\n              _id\n              nickname\n              brief\n              avatar\n              avatar_url\n            }\n          }\n          update_at\n          weaken\n          device\n          like_count\n          create_at\n          content_html\n          like\n        }\n      "),(0,f.default)({dispatch:e,getState:n,name:t,restart:o,filters:r,processList:m,schemaName:"comments",reducerName:"comment",api:"/comments",actionType:"SET_COMMENT_LIST_BY_NAME"})}}function u(e){var t=this;return function(n,r){return new Promise(function(){var o=a(regeneratorRuntime.mark(function a(o,i){var u,l,s,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.default)({type:"mutation",api:"updateComment",args:JSON.parse(JSON.stringify(e)),fields:"\n        success\n      ",headers:{accessToken:r().user.accessToken}});case 2:if(u=t.sent,l=c(u,2),s=l[0],f=l[1],!s){t.next=8;break}return t.abrupt("return",o([s]));case 8:d=e._id,delete e._id,n({type:"UPDATE_COMMENT",id:d,update:m([e])[0]}),o([null]);case 12:case"end":return t.stop()}},a,t)}));return function(e,t){return o.apply(this,arguments)}}())}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.addComment=o,t.loadCommentList=i,t.updateComment=u;var l=n(492),s=n(188),f=r(s),d=n(116),p=r(d),m=function e(t){return t.map(function(t){if(t.create_at&&(t._create_at=(0,l.DateDiff)(t.create_at)),t.content_html){var n=t.content_html.replace(/<[^>]+>/g,"");n.length>200&&(n=n.slice(0,200)+"..."),t.content_summary=n}else t.content_summary="";t.reply&&t.reply.map&&(t.reply=e(t.reply))}),t}},1227:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,l,s,f,d,p=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),y=r(h),v=n(288),b=n(115),g=n(185),_=n(1222),w=n(1221),k=r(w),E=n(1244),C=r(E),x=n(135),O=r(x),T=n(1252),P=r(T),S=(c=(0,g.connect)(function(e,t){return{}},function(e){return{addComment:(0,b.bindActionCreators)(_.addComment,e),updateComment:(0,b.bindActionCreators)(_.updateComment,e),loadCommentList:(0,b.bindActionCreators)(_.loadCommentList,e)}}),l=(0,O.default)(P.default),c(s=l((d=f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={contentJSON:"",contentHTML:"",content:y.default.createElement("div",null),editor:null,showFooter:!1,submitting:!1},n.submit=n.submit.bind(n),n.syncContent=n.syncContent.bind(n),n}return u(t,e),m(t,[{key:"componentDidMount",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,o,i,u,c,l,s,f,d,m,h,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,n=this.props,r=n._id,a=n.parent_id,o=n.posts_id,i=n.reply_id,u=n.getEditor,c=n.loadCommentList,l="",!r){e.next=11;break}return e.next=6,c({name:"edit_"+r,filters:{query:{_id:r},select:"\n            content\n            _id\n          "},restart:!0});case 6:s=e.sent,f=p(s,2),d=f[0],m=f[1],m&&m.data&&m.data[0]&&(l=m.data[0].content);case 11:h=v.reactLocalStorage.get("comments-draft")||"{}";try{h=JSON.parse(h)||{}}catch(e){h={}}b={content:l||h[i||o]||"",syncContent:this.syncContent,getEditor:function(e){t.setState({editor:e}),u(e)},displayControls:!0,placeholder:"写评论...",getCheckUpload:function(e){t.checkUpload=e}},this.setState({content:y.default.createElement(C.default,b)});case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"submit",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,o,i,u,c,l,s,f,d,m,h,v,b,g,_,w,E,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,n=this.props,r=n._id,a=n.posts_id,o=n.parent_id,i=n.reply_id,u=n.successCallback,c=n.addComment,l=n.updateComment,s=n.getEditor,f=this.state,d=f.contentJSON,m=f.contentHTML,h=f.editor,v=f.submitting,!v){e.next=5;break}return e.abrupt("return");case 5:if(d){e.next=7;break}return e.abrupt("return",h.focus());case 7:if(this.checkUpload()){e.next=10;break}return Toastify({text:"有图片上传中，请等待上传完成后再提交",duration:3e3,backgroundColor:"linear-gradient(to right, #0988fe, #1c75fb)"}).showToast(),e.abrupt("return");case 10:if(t.setState({submitting:!0}),b=void 0,g=void 0,!r){e.next=21;break}return e.next=15,l({_id:r,content:d,content_html:m});case 15:_=e.sent,w=p(_,2),b=w[0],g=w[1],e.next=27;break;case 21:return e.next=23,c({posts_id:a,parent_id:o,reply_id:i,contentJSON:d,contentHTML:m,deviceId:k.default.getCurrentDeviceId()});case 23:E=e.sent,x=p(E,2),b=x[0],g=x[1];case 27:this.setState({submitting:!1}),b?b&&Toastify({text:b.message,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast():(this.setState({content:y.default.createElement("div",{key:(new Date).getTime()},y.default.createElement(C.default,{syncContent:t.syncContent,content:"",getEditor:function(e){t.setState({editor:e}),s(e)},displayControls:!o}))}),this.syncContent("",""),u());case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"syncContent",value:function(e,t){var n=this.props,r=n.posts_id,a=n.reply_id;this.state.contentJSON=e,this.state.contentHTML=t,!this.state.showFooter&&e&&this.setState({showFooter:!0});var o=v.reactLocalStorage.get("comments-draft")||"{}";try{o=JSON.parse(o)||{}}catch(e){o={}}var i=[];for(var u in o)i.push(u);i.length>10&&delete o[i[0]],this.state.showFooter&&(o[a||r]=e,v.reactLocalStorage.set("comments-draft",JSON.stringify(o)))}},{key:"render",value:function(){var e=this.state,t=e.content,n=e.showFooter,r=e.submitting;e.uploading;return y.default.createElement("div",{styleName:"box"},y.default.createElement("div",{styleName:"content"},t),n?y.default.createElement("div",{styleName:"footer"},y.default.createElement("button",{onClick:this.submit,type:"button",className:"btn btn-primary"},r?"提交中...":"提交")):null)}}]),t}(h.Component),f.defaultProps={_id:"",posts_id:"",parent_id:"",reply_id:"",successCallback:function(){},getEditor:function(e){}},s=d))||s)||s);t.default=S},1228:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function a(){var e=this;return function(t,n){return new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r,a){var o,u,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)({api:"fetchReportTypes",fields:"\n          success\n          data {\n            id\n            text\n          }\n        "});case 2:o=e.sent,u=i(o,2),l=u[0],s=u[1],s&&s.success&&t({type:"ADD_REPORT_TYPES",types:s.data});case 7:case"end":return e.stop()}},n,e)}));return function(e,t){return n.apply(this,arguments)}}())}}function o(e){var t=this,n=e.data;return function(e,a){return new Promise(function(){var e=r(regeneratorRuntime.mark(function e(r,o){var u,l,s,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)({type:"mutation",api:"addReport",args:n,fields:"success",headers:{accessToken:a().user.accessToken}});case 2:u=e.sent,l=i(u,2),s=l[0],f=l[1],r([s,f]);case 7:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}())}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.loadReportTypes=a,t.addReport=o;var u=n(116),c=function(e){return e&&e.__esModule?e:{default:e}}(u)},1234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){var t=e.id,n=void 0===t?"":t,r=e.title,o=void 0===r?"":r,i=e.body,u=void 0===i?"":i,c=e.footer,l=void 0===c?"":c;return a.default.createElement("div",{className:"modal fade",id:n,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},a.default.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("h5",{className:"modal-title"},o),a.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},a.default.createElement("span",{"aria-hidden":"true"},"×"))),a.default.createElement("div",{className:"modal-body"},u),l?a.default.createElement("div",{className:"modal-footer"},l):null)))}},1235:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.QiniuUploadImage=void 0;var c,l,s,f,d=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(1),h=r(m),y=n(1236),v=r(y),b=n(1238),g=(r(b),n(115)),_=n(185),w=n(1239),k=n(1240),E=(r(k),t.QiniuUploadImage=(c=(0,_.connect)(function(e,t){return{}},function(e){return{getQiNiuToken:(0,g.bindActionCreators)(w.getQiNiuToken,e)}}))((f=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1,files:[],token:"",url:"",uploadKey:""},n.onDrop=n._onDrop.bind(n),n.onUpload=n.onUpload.bind(n),n}return u(t,e),p(t,[{key:"componentDidMount",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getQiNiuToken,e.next=3,t();case 3:n=e.sent,r=d(n,2),a=r[0],o=r[1],o&&this.setState({token:o.token,url:o.url});case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"onUpload",value:function(e){var t=this,n=this.props,r=n.beforeUpload,a=n.upload,o=this.state.url;t.setState({loading:!0});var i=0;r(e),e.map(function(n){n.upload().then(function(r){r.text().then(function(r){r=JSON.parse(r),a(o+"/"+r.key,n),(i+=1)>=e.length&&t.setState({loading:!1})})})})}},{key:"_onDrop",value:function(e){(0,this.props.onDrop)(e)}},{key:"render",value:function(){if(!this.state.token)return h.default.createElement("span",null);var e=this.state,t=(e.loading,e.token,this.props),n=t.multiple,r=(t.name,t.displayLoading,t.text);return h.default.createElement(v.default,{text:r,multiple:n,accept:"image/*",token:this.state.token,onUpload:this.onUpload})}}]),t}(h.default.Component),s.defaultProps={displayLoading:!0,text:"上传图片",multiple:!0,beforeUpload:function(e){},upload:function(e){},onDrop:function(e){},onUpload:function(e){}},l=f))||l);t.default=E},1236:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,l,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),m=n(78),h=r(m);n(493);var y=n(135),v=r(y),b=n(1237),g=r(b),_=(u=(0,v.default)(g.default))((s=l=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.onChange=n.onChange.bind(n),n.upload=n.upload.bind(n),n}return i(t,e),f(t,[{key:"onChange",value:function(e){e.preventDefault();var t=this,n=void 0;e.dataTransfer?n=e.dataTransfer.files:e.target&&(n=e.target.files);for(var r=this.props.multiple?n.length:1,a=[],o=0;o<r;o++)n[o].preview=URL.createObjectURL(n[o]),n[o].upload=function(e){return function(){return t.upload(e)}}(n[o]),a.push(n[o]);this.props.onUpload(a)}},{key:"upload",value:function(e){var t=this;if(!e||0===e.size)return null;var n=e.preview.split("/").pop()+"."+e.name.split(".").pop();return new Promise(function(r){var a=(document.querySelector('input[type="file"]'),new FormData);a.append("file",e),a.append("token",t.props.token),a.append("key",n),a.append("x:filename",e.name),a.append("x:size",e.size),fetch(t.props.uploadUrl,{method:"POST",body:a}).then(function(e){r(e)}).catch(function(e){r(e)})})}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.accept,r=e.multiple;return p.default.createElement("a",{href:"javascript:void(0)",styleName:"file"},t,p.default.createElement("input",{type:"file",accept:n,multiple:r,onChange:this.onChange}))}}]),t}(p.default.Component),l.defaultProps={text:"上传图片",size:2097152,accept:"*",multiple:!0,uploadUrl:function(){return"undefined"==typeof window||"undefined"==typeof document?"":"https:"===window.location.protocol?"https://up.qbox.me/":"http://upload.qiniu.com"}(),onUpload:function(e){}},l.propTypes={token:h.default.string},c=s))||c;t.default=_},1237:function(e,t){e.exports={file:"_20RkjeJ1"}},1238:function(e,t){},1239:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function a(){var e=this;return function(t,n){return new Promise(function(){var t=r(regeneratorRuntime.mark(function t(r,a){var i,c,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)({api:"qiniuToken",fields:"\n          token\n          url\n        ",headers:{accessToken:n().user.accessToken}});case 2:i=e.sent,c=o(i,2),l=c[0],s=c[1],r(l?[l]:[null,s]);case 7:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}())}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getQiNiuToken=a;var i=n(116),u=function(e){return e&&e.__esModule?e:{default:e}}(i)},1240:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Loading=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),s=(n(115),n(185),n(1241)),f=r(s),d=t.Loading=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("div",{className:f.default.loading},l.default.createElement("span",null))}}]),t}(c.Component);t.default=d},1241:function(e,t){e.exports={loading:"_1inE1j98"}},1244:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}function c(e,t,n){e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MyEditor=void 0;var l,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),m=n(56),h=(r(m),n(494)),y=n(495),v=r(y),b=n(1245),g=r(b),_=n(1235),w=r(_);n(1246),n(1247);var k=function(e){var t=e.contentState.getEntity(e.entityKey).getData(),n=t.url;return p.default.createElement("a",{href:n},e.children)},E=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return i(t,e),f(t,[{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),p.default.createElement("span",{className:e+" "+this.props.className,onMouseDown:this.onToggle})}}]),t}(p.default.Component),C=[{className:"title",label:"H2",style:"header-two"},{className:"blockquote",label:"Blockquote",style:"blockquote"},{className:"ul",label:"ul",style:"unordered-list-item"},{className:"code-block",label:"code",style:"code-block"}],x=[{className:"bold",label:"bold",style:"BOLD"},{className:"italic",label:"italic",style:"ITALIC"},{className:"underline",label:"underline",style:"UNDERLINE"}],O=function(e){var t=e.editorState,n=t.getSelection(),r=t.getCurrentContent().getBlockForKey(n.getStartKey()).getType(),a=e.editorState.getCurrentInlineStyle();return p.default.createElement("div",{className:"RichEditor-controls border-bottom"},e.expandControl&&C.map(function(t){return p.default.createElement(E,{key:t.label,active:t.style===r,label:t.label,onToggle:e.toggleBlockType,className:t.className,style:t.style})}),e.expandControl&&x.map(function(t){return p.default.createElement(E,{key:t.label,active:a.has(t.style),label:t.label,onToggle:e.toggleInlineStyle,className:t.className,style:t.style})}),p.default.createElement(w.default,{beforeUpload:function(t){var n=[];t.map(function(e){n.push({name:e.name,src:""})}),e.addImage(n)},upload:function(t,n){e.updateImage(t,n)},text:p.default.createElement("span",{className:"RichEditor-styleButton image"})}),e.expandControl?null:p.default.createElement("span",{onClick:e.handleExpandControl,className:"RichEditor-styleButton more"}),e.expandControl?p.default.createElement("span",{className:"RichEditor-styleButton link",onClick:e.addLink}):null)},T=function(e,t){return e.map(function(e,n){return[e,t?p.default.createElement("br",{key:t[n]}):p.default.createElement("br",null)]})},P={inline:{BOLD:function(e,t){var n=t.key;return p.default.createElement("strong",{key:n},e)},ITALIC:function(e,t){var n=t.key;return p.default.createElement("em",{key:n},e)},UNDERLINE:function(e,t){var n=t.key;return p.default.createElement("u",{key:n},e)},CODE:function(e,t){var n=t.key;return p.default.createElement("span",{key:n},e)}},blocks:{unstyled:function(e){return e.map(function(e,t){return p.default.createElement("p",{key:t},e)})},blockquote:function(e,t){var n=t.keys;return p.default.createElement("blockquote",{key:n[0]},T(e,n))},"header-one":function(e){return e.map(function(e,t){return p.default.createElement("h1",{key:t},e)})},"header-two":function(e){return e.map(function(e,t){return p.default.createElement("h2",{key:t},e)})},"code-block":function(e,t){var n=t.keys;return p.default.createElement("pre",{key:n[0]},T(e,n))},"unordered-list-item":function(e,t){var n=(t.depth,t.keys);return p.default.createElement("ul",{key:n[n.length-1]},e.map(function(e,t){return p.default.createElement("li",{key:n[t]},e)}))},"ordered-list-item":function(e,t){var n=(t.depth,t.keys);return p.default.createElement("ol",{key:n.join("|")},e.map(function(e,t){return p.default.createElement("li",{key:n[t]},e)}))},atomic:function(e,t){var n=t.keys;return T(e,n)}},entities:{youku:function(e,t,n){var r=n.key;return p.default.createElement("div",{key:r,"data-youku":t.src})},tudou:function(e,t,n){var r=n.key;return p.default.createElement("div",{key:r,"data-tudou":t.src})},qq:function(e,t,n){var r=n.key;return p.default.createElement("div",{key:r,"data-qq":t.src})},youtube:function(e,t,n){var r=n.key;return p.default.createElement("div",{key:r,"data-youtube":t.src})},image:function(e,t,n){var r=n.key;return p.default.createElement("img",{key:r,src:t.src})},"163-music-song":function(e,t,n){var r=n.key;return p.default.createElement("div",{key:r,"data-163musicsong":t.src})},"163-music-playlist":function(e,t,n){var r=n.key;return p.default.createElement("div",{key:r,"data-163musicplaylist":t.src})},LINK:function(e,t,n){var r=n.key;return p.default.createElement("a",{key:r,href:t.url,target:"_blank",rel:"nofollow"},e)}}},S=new h.CompositeDecorator([{strategy:c,component:k}]),j=t.MyEditor=(s=l=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props,i=r.syncContent,u=r.content,c=r.readOnly,l=r.placeholder,s=r.expandControl;return n.state={syncContent:i,readOnly:c,editorState:u?h.EditorState.createWithContent((0,h.convertFromRaw)(JSON.parse(u)),S):h.EditorState.createEmpty(S),rendered:null,placeholder:l,expandControl:s||!1},n.onChange=n._onChange.bind(n),n.toggleBlockType=function(e){return n._toggleBlockType(e)},n.toggleInlineStyle=function(e){return n._toggleInlineStyle(e)},n.addImage=n._addImage.bind(n),n.addLink=n._addLink.bind(n),n.updateImage=n._updateImage.bind(n),n.handleKeyCommand=n._handleKeyCommand.bind(n),n.mapKeyToEditorCommand=n._mapKeyToEditorCommand.bind(n),n.mediaBlockRenderer=n.mediaBlockRenderer.bind(n),n.media=n._media.bind(n),n.checkUpload=n.checkUpload.bind(n),n}return i(t,e),f(t,[{key:"componentDidMount",value:function(){this.onChange(this.state.editorState),this.props.getEditor(this.refs.editor),this.props.getCheckUpload(this.checkUpload)}},{key:"_onChange",value:function(e){this.setState({editorState:e},function(){});var t=this.state.syncContent,n=this.refs.draftHtml;if(t){var r=e.getCurrentContent(),a=(0,v.default)((0,h.convertToRaw)(r),P);this.setState({rendered:a}),setTimeout(function(){var e=n.innerHTML.replace(/<!--[\w\W\r\n]*?-->/gim,""),a=e.replace(/<p>/gim,"");if(!(a=a.replace(/<\/p>/gim,"")))return void t("","");t(JSON.stringify((0,h.convertToRaw)(r)),e)},100)}}},{key:"_toggleBlockType",value:function(e){this.onChange(h.RichUtils.toggleBlockType(this.state.editorState,e))}},{key:"_toggleInlineStyle",value:function(e){this.onChange(h.RichUtils.toggleInlineStyle(this.state.editorState,e))}},{key:"_addLink",value:function(e){var t=this.state.editorState;if(t.getSelection().isCollapsed())alert("请先选取需要添加链接的文字内容");else{var n=prompt("请输入url地址以http://或https://开头","");if(!n)return;var r=t.getCurrentContent(),a=r.createEntity("LINK","MUTABLE",{url:n}),o=a.getLastCreatedEntityKey(),i=h.EditorState.set(t,{currentContent:a});this.onChange(h.RichUtils.toggleLink(i,i.getSelection(),o))}}},{key:"_addImage",value:function(e){this._promptForMedia("image",e)}},{key:"_updateImage",value:function(e,t){var n=this,r=n.state.editorState,a=r.getCurrentContent();a.blockMap.map(function(n){n.findEntityRanges(function(n){var r=n.getEntity();if(r){if("image"==a.getEntity(r).getType()){var o=a.getEntity(r).getData();o.name==t.name&&(o.src=e,a.replaceEntityData(r,o))}}})}),n.refs.editor.blur(),n.refs.editor.focus()}},{key:"checkUpload",value:function(){var e=this,t=e.state.editorState,n=t.getCurrentContent(),r=!0;return n.blockMap.map(function(e){e.findEntityRanges(function(e){var t=e.getEntity();if(t){if("image"==n.getEntity(t).getType()){var a=n.getEntity(t).getData();a.name&&!a.src&&(r=!1)}}})}),r}},{key:"_promptForMedia",value:function(e,t){var n=this.state.editorState,r=n,a=null;t.map(function(e){var t=r.getCurrentContent(),n=t.createEntity("image","IMMUTABLE",e);a=n.getLastCreatedEntityKey();var o=h.AtomicBlockUtils.insertAtomicBlock(r,a," ");r=o}),this.onChange(r)}},{key:"_handleKeyCommand",value:function(e){var t=this.state.editorState,n=h.RichUtils.handleKeyCommand(t,e);return!!n&&(this.onChange(n),!0)}},{key:"_mapKeyToEditorCommand",value:function(e){switch(e.keyCode){case 9:var t=h.RichUtils.onTab(e,this.state.editorState,4);return void(t!==this.state.editorState&&this.onChange(t))}return(0,h.getDefaultKeyBinding)(e)}},{key:"_media",value:function(e){var t=this.state.editorState,n=t.getCurrentContent(),r=n.getEntity(e.block.getEntityAt(0)),a=r.getData(),o=a.src,i=r.getType(),u=void 0;if("link"===i)u=p.default.createElement("a",{href:o,target:"_blank",rel:"nofollow"},o);else if("image"===i)u=p.default.createElement("img",{src:o});else if("youtube"===i){var c="https://www.youtube.com/embed/"+o;u=p.default.createElement("iframe",{src:c})}else if("youku"===i){var l="https://player.youku.com/embed/"+o;u=p.default.createElement("iframe",{src:l})}else if("qq"===i){var s="https://v.qq.com/iframe/player.html?vid="+o+"&tiny=0&auto=0";u=p.default.createElement(g.default,{src:s,width:"auto",height:"auto",position:""})}else if("163-music-song"===i){var f="//music.163.com/outchain/player?type=2&id="+o+"&auto=1&height=66";u=p.default.createElement(g.default,{src:f,width:"auto",height:"86",position:""})}else if("163-music-playlist"===i){var d="//music.163.com/outchain/player?type=0&id="+o+"&auto=1&height=430";u=p.default.createElement(g.default,{src:d,width:"auto",height:"450",position:""})}return u}},{key:"mediaBlockRenderer",value:function(e){if("atomic"===e.getType())return{component:this.media,editable:!1,props:{foo:"bar"}}}},{key:"render",value:function(){var e=this,t=this.state,n=t.editorState,r=(t.readOnly,t.rendered),a=t.placeholder,o=t.expandControl,i=this.props.displayControls;return p.default.createElement("div",{className:"RichEditor-editor"},p.default.createElement("div",{ref:"draftHtml",style:{display:"none"}},r),i?p.default.createElement(O,{editorState:n,toggleBlockType:this.toggleBlockType,toggleInlineStyle:this.toggleInlineStyle,addImage:this.addImage,addLink:this.addLink,updateImage:this.updateImage,expandControl:o,handleExpandControl:function(){e.setState({expandControl:!e.state.expandControl})}}):null,p.default.createElement(h.Editor,{blockRendererFn:this.mediaBlockRenderer,editorState:n,blockStyleFn:u,onChange:this.onChange,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.mapKeyToEditorCommand,placeholder:a,ref:"editor",stripPastedStyles:!0,spellCheck:!0}))}}]),t}(p.default.Component),l.defaultProps={displayControls:!0,syncContent:null,content:"",readOnly:!1,getEditor:function(e){},placeholder:"请输入正文",getCheckUpload:function(){}},s);t.default=j},1245:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),s=n(78),f=r(s),d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.src!==e.src}},{key:"render",value:function(){var e=this.props,t=e.src,n=e.width,r=void 0===n?"auto":n,a=e.height,o=void 0===a?"auto":a;return l.default.createElement("iframe",{ref:"iframe",src:t,width:r,height:o})}}]),t}(l.default.Component);d.propTypes={src:f.default.string.isRequired},e.exports=d},1246:function(e,t){},1247:function(e,t){},1251:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function a(e){var t=e.accessToken;return function(e,n){e({type:"ADD_ACCESS_TOKEN",accessToken:t})}}function o(){return{type:"REMOVE_ACCESS_TOKEN"}}function i(e){var t=this;return function(){var n=r(regeneratorRuntime.mark(function n(a,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r){var a,i,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._id=o().user.profile._id,t.next=3,(0,s.default)({type:"mutation",api:"updateUser",args:e,fields:"\n          success\n        ",headers:{accessToken:o().user.accessToken}});case 3:a=t.sent,i=c(a,2),u=i[0],l=i[1],r([u,l]);case 8:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()}function u(e){var t=this;return function(){var n=r(regeneratorRuntime.mark(function n(a,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=r(regeneratorRuntime.mark(function n(r){var a,i,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.user_id=o().user.profile._id,t.next=3,(0,s.default)({type:"mutation",api:"updatePassword",args:e,fields:"\n          success\n        ",headers:{accessToken:o().user.accessToken}});case 3:a=t.sent,i=c(a,2),u=i[0],l=i[1],r([u,l]);case 8:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()}Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserInfo=void 0;var c=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.addAccessToken=a,t.removeAccessToken=o,t.updateUser=i,t.updatePassword=u;var l=n(116),s=function(e){return e&&e.__esModule?e:{default:e}}(l);t.loadUserInfo=function(e){var t=e.accessToken,n=void 0===t?null:t;return function(e,t){return new Promise(function(){var a=r(regeneratorRuntime.mark(function r(a,o){var i,u,l,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=n||t().user.accessToken,r.next=3,(0,s.default)({api:"selfInfo",args:{},fields:"\n        _id\n        nickname_reset_at\n        create_at\n        last_sign_at\n        blocked\n        role\n        avatar\n        brief\n        source\n        posts_count\n        comment_count\n        fans_count\n        like_count\n        follow_people_count\n        follow_topic_count\n        follow_posts_count\n        block_people_count\n        block_posts_count\n        block_comment_count\n        gender\n        nickname\n        banned_to_post\n        avatar_url\n        email\n        weibo\n        qq\n        github\n        phone\n        area_code\n        find_notification_at\n        last_find_posts_at\n        ",headers:{accessToken:n}});case 3:i=r.sent,u=c(i,2),l=u[0],f=u[1],l?a([l]):(e({type:"SET_USER",userinfo:f}),a([null,f]));case 8:case"end":return r.stop()}},r,void 0)}));return function(e,t){return a.apply(this,arguments)}}())}}},1252:function(e,t){e.exports={box:"_3dai3Loe",content:"_1ym4AzlH",footer:"_3ZIBjSP6"}},1273:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,l,s,f,d,p=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),y=r(h),v=n(78),b=r(v),g=n(115),_=n(185),w=n(1274),k=n(135),E=r(k),C=n(1275),x=r(C),O=(c=(0,_.connect)(function(e,t){return{}},function(e){return{addCaptcha:(0,g.bindActionCreators)(w.addCaptcha,e)}}),l=(0,E.default)(x.default),c(s=l((d=f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1,countdown:0},n.send=n.send.bind(n),n}return u(t,e),m(t,[{key:"send",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,o,i,u,c,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,r=this.props.addCaptcha,a=this.state,o=a.loading,i=a.countdown,!(o||i>0)){e.next=5;break}return e.abrupt("return");case 5:return this.setState({loading:!0}),e.next=8,r(t);case 8:if(u=e.sent,c=p(u,2),l=c[0],s=c[1],!l){e.next=16;break}return Toastify({text:l.message,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast(),this.setState({loading:!1}),e.abrupt("return");case 16:this.setState({loading:!1,countdown:60},function(){!function e(){if(0==n.state.countdown)return void n.setState({loading:!1});n.setState({countdown:n.state.countdown-1}),setTimeout(function(){e()},1e3)}()});case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=this,t=this.state.countdown;return y.default.createElement("a",{href:"javascript:void(0)",styleName:"captcha-button",onClick:function(){e.props.onClick(e.send)}},t>0?"发送成功 ("+t+")":"获取验证码")}}]),t}(h.Component),f.propTypes={onClick:b.default.func.isRequired},s=d))||s)||s);t.default=O},1274:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addCaptcha=void 0;var a=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(116),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.addCaptcha=function(e){var t=e.id,n=void 0===t?(new Date).getTime():t,o=e.args,u=e.fields,c=void 0===u?"success":u;return function(e,t){return new Promise(function(){var u=r(regeneratorRuntime.mark(function r(u){var l,s,f,d,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=l||t().user.accessToken,r.next=3,(0,i.default)({type:"mutation",api:"addCaptcha",args:o,fields:c,headers:l?{AccessToken:l}:null});case 3:s=r.sent,f=a(s,2),d=f[0],p=f[1],p&&p._id&&p.url&&e({type:"ADD_CAPRCHA_ID",id:n,data:p}),u([d,p]);case 9:case"end":return r.stop()}},r,void 0)}));return function(e){return u.apply(this,arguments)}}())}}},1275:function(e,t){e.exports={"captcha-button":"_3_czJ2I_"}},1278:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,l,s,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),h=n(78),y=r(h),v=n(115),b=n(185),g=n(1281),_=n(504),w=n(135),k=r(w),E=n(1282),C=r(E),x=(u=(0,b.connect)(function(e,t){return{countries:(0,_.getCountries)(e)}},function(e){return{loadCountries:(0,v.bindActionCreators)(g.loadCountries,e)}}),c=(0,k.default)(C.default),u(l=c((f=s=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.countries,n=e.loadCountries,r=e.onChange,a=e.initValue;0==t.length&&n(),r(a)}},{key:"render",value:function(){var e=this.props,t=e.countries,n=e.onChange,r=e.initValue;return m.default.createElement("select",{styleName:"select",defaultValue:r,onChange:function(e){return n(e.target.value)}},t.map(function(e,t){return m.default.createElement("option",{key:t,value:e.code},e.name," ",e.code)}))}}]),t}(p.Component),s.defaultProps={onChange:y.default.func.isRequired,initValue:"+86"},l=f))||l)||l);t.default=x},1281:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function a(){var e=this;return function(t,n){return new Promise(function(){var a=r(regeneratorRuntime.mark(function r(a){var i,c,l,s,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=n().countries)&&i.length>0)){e.next=4;break}return a([null,i]),e.abrupt("return");case 4:return e.next=6,(0,u.default)({api:"countries",fields:"\n          code\n          name\n          abbr\n        "});case 6:c=e.sent,l=o(c,2),s=l[0],f=l[1],s?a([s]):(t({type:"SET_COUNTRIES",countries:f}),a([null,f]));case 11:case"end":return e.stop()}},r,e)}));return function(e){return a.apply(this,arguments)}}())}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.loadCountries=a;var i=n(116),u=function(e){return e&&e.__esModule?e:{default:e}}(i)},1282:function(e,t){e.exports={select:"o8ECEp-l"}},1283:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}var a=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(116),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.addPhone=function(e){return function(t){var n=t.args,o=void 0===n?{}:n,u=t.fields,c=void 0===u?"success":u;return function(t,n){return new Promise(function(){var t=r(regeneratorRuntime.mark(function t(r){var u,l,s,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=u||n().user.accessToken,t.next=3,(0,i.default)({type:"mutation",api:e,args:o,fields:c,headers:u?{AccessToken:u}:null});case 3:l=t.sent,s=a(l,2),f=s[0],d=s[1],r(f?[f]:[null,d]);case 8:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}())}}}("addPhone")},1289:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),f=r(s),d=n(136),p=n(117),m=n(1290),h=r(m),y=n(1292),v=r(y),b=n(1234),g=r(b),_=n(135),w=r(_),k=n(1294),E=r(k),C=(u=(0,w.default)(E.default))(c=function(t){function n(e){a(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={type:"sign-in"},t.displayComponent=t.displayComponent.bind(t),t}return i(n,t),l(n,[{key:"displayComponent",value:function(){this.setState({type:"sign-up"==this.state.type?"sign-in":"sign-up"})}},{key:"componentDidMount",value:function(){var t=this;e("#sign").on("show.bs.modal",function(e){t.setState({type:e.relatedTarget["data-type"]||e.relatedTarget.getAttribute("data-type")||"sign-in"})})}},{key:"render",value:function(){var t=this.state.type,n=f.default.createElement("div",{styleName:"layer"},f.default.createElement("div",{styleName:"social"},f.default.createElement("ul",null,f.default.createElement("li",null,f.default.createElement("a",{href:p.original_api_domain+"/oauth/weibo",styleName:"weibo"},f.default.createElement("span",{styleName:"weibo-icon"},"使用微博登录"))),f.default.createElement("li",null,f.default.createElement("a",{href:p.original_api_domain+"/oauth/qq",styleName:"qq"},f.default.createElement("span",{styleName:"qq-icon"},"使用 QQ 登录"))),f.default.createElement("li",null,f.default.createElement("a",{href:p.original_api_domain+"/oauth/github",styleName:"github"},f.default.createElement("span",{styleName:"github-icon"},"使用 GitHub 登录"))))),f.default.createElement("fieldset",null,f.default.createElement("legend",null,"或")),"sign-in"==t?f.default.createElement("div",null,f.default.createElement(h.default,{displayComponent:this.displayComponent}),f.default.createElement("div",null,"没有账号？ ",f.default.createElement("a",{href:"javascript:void(0)",onClick:this.displayComponent},"注册")),f.default.createElement("div",null,f.default.createElement(d.Link,{to:"/forgot",onClick:function(){e("#sign").modal("hide")}},"忘记密码？"))):null,"sign-up"==t?f.default.createElement("div",null,f.default.createElement(v.default,{displayComponent:this.displayComponent}),f.default.createElement("div",null,"已经有账号了？ ",f.default.createElement("a",{href:"javascript:void(0)",onClick:this.displayComponent},"登录"))):null,f.default.createElement("div",null,"登录即表示你同意网站的《",f.default.createElement(d.Link,{to:"/agreement",onClick:function(){e("#sign").modal("hide")}},"用户协议"),"》"));return f.default.createElement("div",null,f.default.createElement(g.default,{id:"sign",title:"sign-in"==t?"登录":"注册",body:n}))}}]),n}(s.Component))||c;t.default=C}).call(t,n(187))},1290:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,l,s,f=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),h=n(287),y=n(135),v=r(y),b=n(1291),g=r(b),_=n(115),w=n(185),k=n(501),E=n(1274),C=n(506),x=(c=(0,w.connect)(function(e,t){return{captcha:(0,C.getCaptchaById)(e,"sign-in")}},function(e){return{addCaptcha:function(){return(0,_.bindActionCreators)(E.addCaptcha,e)({id:"sign-in",args:{type:"sign-in"},fields:"\n          success\n          _id\n          url\n        "})},signIn:(0,_.bindActionCreators)(k.signIn,e)}}),l=(0,v.default)(g.default),c(s=l(s=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={},t.signin=t.signin.bind(t),t.toForgot=t.toForgot.bind(t),t.getCaptcha=t.getCaptcha.bind(t),t}return u(n,t),d(n,[{key:"componentDidMount",value:function(){var t=this;e("#sign").on("show.bs.modal",function(e){t.getCaptcha()})}},{key:"getCaptcha",value:function(){this.props.addCaptcha()}},{key:"signin",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,a,o,i,u,c,l,s,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=this.props.signIn,r=this.refs.account,a=this.refs.password,o=this.refs.submit,i=this.refs.captcha,u=this.state.captchaId,r.value){e.next=9;break}return e.abrupt("return",r.focus());case 9:if(a.value){e.next=11;break}return e.abrupt("return",a.focus());case 11:if(!i||i.value){e.next=13;break}return e.abrupt("return",i.focus());case 13:return c={password:a.value},-1!=r.value.indexOf("@")?c.email=r.value:c.phone=r.value,i&&(c.captcha=i.value),this.props.captcha&&(c.captcha_id=this.props.captcha._id),o.value="登录中...",o.disabled=!0,e.next=21,n({data:c});case 21:return l=e.sent,s=f(l,2),d=s[0],p=s[1],o.value="登录",o.disabled=!1,d&&(Toastify({text:d,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast(),this.getCaptcha()),e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"toForgot",value:function(){h.browserHistory.push("/forgot")}},{key:"render",value:function(){var e=this.props.captcha;return m.default.createElement("form",{onSubmit:this.signin,className:"signin"},m.default.createElement("div",null,m.default.createElement("input",{type:"text",className:"form-control",ref:"account",placeholder:"手机号或邮箱"})),m.default.createElement("div",null,m.default.createElement("input",{type:"password",className:"form-control",ref:"password",placeholder:"密码",onFocus:function(e){e.target.value=""}})),e?m.default.createElement("div",null,m.default.createElement("input",{type:"text",className:"form-control",placeholder:"请输入验证码",ref:"captcha",onFocus:function(e){e.target.value=""}}),m.default.createElement("img",{styleName:"captcha-image",onClick:this.getCaptcha,src:e.url})):null,m.default.createElement("div",null,m.default.createElement("input",{type:"submit",ref:"submit",className:"btn btn-primary",value:"登录"})))}}]),n}(p.Component))||s)||s);t.default=x}).call(t,n(187))},1291:function(e,t){e.exports={error:"_2srDRobL",signup:"_2te5OArO","captcha-image":"P_eZF8Hx",alert:"_3R1vFIOE"}},1292:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,l,s,f=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),h=n(1221),y=r(h),v=n(115),b=n(185),g=n(501),_=n(1273),w=r(_),k=n(1278),E=r(k),C=n(135),x=r(C),O=n(1293),T=r(O),P=(c=(0,b.connect)(function(e,t){return{}},function(e){return{signUp:(0,v.bindActionCreators)(g.signUp,e),signIn:(0,v.bindActionCreators)(g.signIn,e)}}),l=(0,x.default)(T.default),c(s=l(s=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={areaCode:"",type:"phone",show:!1},t.submit=t.submit.bind(t),t.sendCaptcha=t.sendCaptcha.bind(t),t}return u(n,t),d(n,[{key:"componentDidMount",value:function(){this.setState({show:!0})}},{key:"submit",value:function(){function t(e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n){var r,a,o,i,u,c,l,s,d,p,m,h,v,b,g,_,w,k,E;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=this,a=this.refs,o=a.nickname,i=a.account,u=a.password,c=a.male,l=a.female,s=a.captcha,d=this.state.areaCode,p=this.props,m=p.signUp,h=p.signIn,o.value){t.next=7;break}return t.abrupt("return",o.focus());case 7:if(i.value){t.next=9;break}return t.abrupt("return",i.focus());case 9:if(s.value){t.next=11;break}return t.abrupt("return",s.focus());case 11:if(u.value){t.next=13;break}return t.abrupt("return",u.focus());case 13:if(c.checked||l.checked){t.next=16;break}return Toastify({text:"请选择性别",duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast(),t.abrupt("return");case 16:return v={nickname:o.value,password:u.value,gender:c.checked?1:0,source:parseInt(y.default.getCurrentDeviceId()),captcha:s.value},-1!=i.value.indexOf("@")?v.email=i.value:(v.phone=i.value,v.area_code=d),t.next=20,m(v);case 20:if(b=t.sent,g=f(b,2),_=g[0],w=g[1],!_){t.next=29;break}return Toastify({text:_&&_.message?_.message:_,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast(),t.abrupt("return");case 29:Toastify({text:"注册成功",duration:3e3,backgroundColor:"linear-gradient(to right, #50c64a, #40aa33)"}).showToast();case 30:return delete v.nickname,delete v.gender,delete v.source,delete v.captcha,delete v.area_code,t.next=37,h({data:v});case 37:k=t.sent,E=f(k,2),_=E[0],w=E[1],_&&(e("#sign").modal("hide"),setTimeout(function(){e("#sign").modal({show:!0},{"data-type":"sign-in"})},700));case 42:case"end":return t.stop()}},t,this)}));return t}()},{key:"sendCaptcha",value:function(e){var t=this.refs.account,n=this.state.areaCode;if(!t.value)return t.focus();var r={type:"sign-up"};-1!=t.value.indexOf("@")?r.email=t.value:(r.area_code=n,r.phone=t.value),e({args:r})}},{key:"render",value:function(){var e=this,t=this.state,n=t.type,r=t.show;return m.default.createElement("div",{styleName:"signup"},m.default.createElement("div",null,m.default.createElement("input",{type:"text",className:"form-control",ref:"nickname",placeholder:"名字"})),"phone"==n?m.default.createElement("div",{className:"container"},m.default.createElement("div",{className:"row justify-content-between"},m.default.createElement("div",{className:"col-4"},m.default.createElement(E.default,{onChange:function(t){e.state.areaCode=t}})),m.default.createElement("div",{className:"col-8"},m.default.createElement("input",{type:"text",className:"form-control",ref:"account",placeholder:"手机号"})))):m.default.createElement("div",null,m.default.createElement("input",{type:"text",className:"form-control",ref:"account",placeholder:"邮箱"})),m.default.createElement("div",null,m.default.createElement("input",{type:"text",className:"form-control",placeholder:"输入 6 位验证码",ref:"captcha"}),m.default.createElement("span",{styleName:"captcha-button"},r?m.default.createElement(w.default,{onClick:this.sendCaptcha}):null)),m.default.createElement("div",null,m.default.createElement("input",{type:"password",className:"form-control",ref:"password",placeholder:"密码"})),m.default.createElement("div",{styleName:"gender"},"性别",m.default.createElement("div",{className:"form-check form-check-inline"},m.default.createElement("input",{className:"form-check-input",type:"radio",name:"gender",id:"male",value:"男",ref:"male"}),m.default.createElement("label",{className:"form-check-label",htmlFor:"male"},"男")),m.default.createElement("div",{className:"form-check form-check-inline"},m.default.createElement("input",{className:"form-check-input",type:"radio",name:"gender",id:"female",value:"女",ref:"female"}),m.default.createElement("label",{className:"form-check-label",htmlFor:"female"},"女"))),m.default.createElement("div",null,m.default.createElement("input",{type:"submit",className:"btn btn-primary",value:"注册",onClick:this.submit})),"phone"==n?m.default.createElement("div",null,m.default.createElement("a",{href:"javascript:void(0)",onClick:function(){e.setState({type:"email"})}},"使用邮箱注册")):m.default.createElement("div",null,m.default.createElement("a",{href:"javascript:void(0)",onClick:function(){e.setState({type:"phone"})}},"使用手机注册")))}}]),n}(p.Component))||s)||s);t.default=P}).call(t,n(187))},1293:function(e,t){e.exports={signup:"w1NIZZr8",gender:"LCnlR5HK",signin:"_3KjoG1uC",captcha:"_2FDdM18l","captcha-button":"_3oR3KDHd"}},1294:function(e,t){e.exports={layer:"_2cipACW5",social:"jHtRuGlw",weibo:"_1c-B7UMw","weibo-icon":"_1zIo7dpF","qq-icon":"ZE8RdV1U","github-icon":"_1sh0OlKG",qq:"_3Y4rRr6s",github:"qyLXfPuj",signin:"_3MHSWfsz",mark:"_2XTBAxv_"}},1295:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=r(l),f=n(1234),d=r(f),p=n(1227),m=r(p),h=function(t){function n(e){a(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={modalId:"editor-comment-modal",show:!1,comment:null,type:""},t}return i(n,t),c(n,[{key:"componentDidMount",value:function(){var t=this,n=this.state.modalId;e("#"+n).on("show.bs.modal",function(e){t.setState({show:!0,comment:e.relatedTarget.comment,type:e.relatedTarget.type})}),e("#"+n).on("hidden.bs.modal",function(e){t.setState({show:!1,comment:null,type:""})})}},{key:"render",value:function(){var t=this.state,n=t.show,r=t.type,a=t.comment,o=t.modalId;if(!n)return s.default.createElement(d.default,{id:o,title:"回复",body:""});var i="回复",c={successCallback:function(){e("#"+o).modal("hide")},getEditor:function(e){setTimeout(function(){return e.focus()},500)}};return"reply"==r?(i="回复",c=u({},c,{id:a._id,posts_id:a.posts_id._id||a.posts_id,parent_id:a.parent_id||a._id,reply_id:a._id})):"edit"==r&&(i="编辑",c=u({},c,a)),s.default.createElement(d.default,{id:o,title:i,body:s.default.createElement(m.default,c)})}}]),n}(l.Component);t.default=h}).call(t,n(187))},1296:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,l,s,f=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),m=r(p),h=n(1234),y=r(h),v=n(115),b=n(185),g=n(507),_=n(1228),w=n(135),k=r(w),E=n(1297),C=r(E),x=(c=(0,b.connect)(function(e,t){return{types:(0,g.getReportTypes)(e)}},function(e){return{loadReportTypes:(0,v.bindActionCreators)(_.loadReportTypes,e),addReport:(0,v.bindActionCreators)(_.addReport,e)}}),l=(0,k.default)(C.default),c(s=l(s=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={submitting:!1,posts:null,comment:null,user:null,type:0},t.submit=t.submit.bind(t),t.chooseType=t.chooseType.bind(t),t}return u(n,t),d(n,[{key:"componentDidMount",value:function(){var t=this,n=this;e("#report").on("show.bs.modal",function(){var e=a(regeneratorRuntime.mark(function e(r){var a,o,i,u,c,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props,o=a.types,i=a.loadReportTypes,o){e.next=4;break}return e.next=4,i();case 4:u=r.relatedTarget,c=u.posts,l=u.comment,s=u.user,n.setState({posts:c,comment:l,user:s});case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}},{key:"submit",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n,r,a,o,i,u,c,l,s,d,p,m,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.state,r=n.submitting,a=n.posts,o=n.comment,i=n.user,u=n.type,c=this.refs.detail,l=this.props.addReport,u){t.next=6;break}return Toastify({text:"请选择举报类型",duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast(),t.abrupt("return");case 6:if(s={report_id:u},c.value&&(s.detail=c.value),!a){t.next=12;break}s.posts_id=a._id,t.next=22;break;case 12:if(!o){t.next=16;break}s.comment_id=o._id,t.next=22;break;case 16:if(!i){t.next=20;break}s.people_id=i._id,t.next=22;break;case 20:return Toastify({text:"举报目标不存在",duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast(),t.abrupt("return");case 22:return this.setState({submitting:!0}),t.next=25,l({data:s});case 25:d=t.sent,p=f(d,2),m=p[0],h=p[1],this.setState({submitting:!1}),m?Toastify({text:m.message,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast():(Toastify({text:"提交成功",duration:3e3,backgroundColor:"linear-gradient(to right, #50c64a, #40aa33)"}).showToast(),e("#report").modal("hide"),e("#report input:radio").each(function(e,t){t.checked=!1}),c.value="");case 31:case"end":return t.stop()}},t,this)}));return t}()},{key:"chooseType",value:function(e){var t=this;return function(){t.state.type=e.id}}},{key:"render",value:function(){var e=this,t=this.state,n=t.submitting,r=t.posts,a=t.comment,o=t.user,i=this.props.types,u="";return r?u=m.default.createElement("div",null,"我要举报 ",m.default.createElement("b",null,r.user_id.nickname)," 的帖子",m.default.createElement("div",null,r.title)):a?u=m.default.createElement("div",null,"我要举报 ",m.default.createElement("b",null,a.user_id.nickname)," 的",a.parent_id?"回复":"评论",m.default.createElement("div",null,a.content_summary)):o&&(u=m.default.createElement("div",null,"我要举报 ",m.default.createElement("b",null,o.nickname)," 用户")),m.default.createElement("div",null,m.default.createElement(y.default,{id:"report",title:"举报",body:m.default.createElement("div",{styleName:"box"},m.default.createElement("div",{styleName:"report-content"},u),m.default.createElement("div",{styleName:"types"},i&&i.map(function(t){return m.default.createElement("label",{key:t.id},m.default.createElement("input",{type:"radio",name:"report",onClick:e.chooseType(t)}),t.text)})),m.default.createElement("div",{styleName:"detail"},m.default.createElement("textarea",{placeholder:"补充举报说明",className:"border",ref:"detail"})),m.default.createElement("div",null,m.default.createElement("button",{onClick:this.submit,type:"button",className:"btn btn-primary"},n?"提交中...":"提交")))}))}}]),n}(p.Component))||s)||s);t.default=x}).call(t,n(187))},1297:function(e,t){e.exports={box:"_1-GfY6fn","report-content":"_2KybMTLl",types:"Hq-qV_3P",detail:"_3DPSxnMw"}},1298:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,l,s,f,d,p=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),y=r(h),v=n(288),b=n(115),g=n(185),_=n(1251),w=n(1283),k=n(186),E=n(1273),C=r(E),x=n(1278),O=r(x),T=n(1234),P=r(T),S=n(135),j=r(S),N=n(1299),R=r(N),M=(c=(0,g.connect)(function(e,t){return{me:(0,k.getProfile)(e)}},function(e){return{addPhone:(0,b.bindActionCreators)(w.addPhone,e),loadUserInfo:(0,b.bindActionCreators)(_.loadUserInfo,e)}}),l=(0,j.default)(R.default),c(s=l((d=f=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={areaCode:"",show:!1},t.submit=t.submit.bind(t),t.sendCaptcha=t.sendCaptcha.bind(t),t}return u(n,t),m(n,[{key:"componentDidMount",value:function(){var t=this.props.me;if(t&&!t.phone){var n=parseInt(v.reactLocalStorage.get("binding-phone-tips")||0),r=(new Date).getTime();r-n>1728e5&&(v.reactLocalStorage.set("binding-phone-tips",r),setTimeout(function(){e("#binding-phone").modal({show:!0},{}),e("#binding-phone").on("show.bs.modal",function(e){self.setState({show:!0})}),e("#binding-phone").on("hide.bs.modal",function(e){self.setState({show:!1})})},3e3))}}},{key:"submit",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n,r,a,o,i,u,c,l,s,f,d,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,r=this.props,a=r.loadUserInfo,o=r.addPhone,i=this.refs,u=i.phone,c=i.captcha,l=this.state.areaCode,u.value){t.next=6;break}return t.abrupt("return",u.focus());case 6:if(c.value){t.next=8;break}return t.abrupt("return",c.focus());case 8:return t.next=10,o({args:{phone:u.value,captcha:c.value,area_code:l}});case 10:s=t.sent,f=p(s,2),d=f[0],m=f[1],d?Toastify({text:d.message,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast():(Toastify({text:"修改成功",duration:3e3,backgroundColor:"linear-gradient(to right, #50c64a, #40aa33)"}).showToast(),a({}),e("#binding-phone").modal("hide"));case 15:case"end":return t.stop()}},t,this)}));return t}()},{key:"sendCaptcha",value:function(e){var t=this.refs.phone,n=this.state.areaCode;if(!t.value)return t.focus();e({id:"phone",args:{phone:t.value,area_code:n,type:"binding-phone"},fields:"success"})}},{key:"render",value:function(){var e=this,t=this.state.show;return y.default.createElement(P.default,{id:"binding-phone",title:"绑定手机",body:y.default.createElement("div",{styleName:"body"},y.default.createElement("div",null,"亲爱的用户，应2017年10月1日起实施的《中华人民共和国网络安全法》要求，网站须强化用户实名认证机制。您需要验证手机方可使用社区功能，烦请您将账号与手机进行绑定。"),y.default.createElement("br",null),y.default.createElement("div",{className:"form-group"},y.default.createElement("div",{className:"container"},y.default.createElement("div",{className:"row"},y.default.createElement("div",{className:"col-3"},t?y.default.createElement(O.default,{onChange:function(t){e.state.areaCode=t}}):null),y.default.createElement("div",{className:"col-9"},y.default.createElement("input",{className:"form-control",type:"text",placeholder:"请输入您的手机号",ref:"phone"}))))),y.default.createElement("div",{className:"form-group"},y.default.createElement("input",{className:"form-control",type:"text",placeholder:"输入6位数验证码",ref:"captcha"}),y.default.createElement("div",null,y.default.createElement(C.default,{onClick:this.sendCaptcha})))),footer:y.default.createElement("div",null,y.default.createElement("a",{className:"btn btn-primary",href:"javascript:void(0);",onClick:this.submit},"提交"))})}}]),n}(h.Component),f.defaultProps={show:function(){},hide:function(){}},s=d))||s)||s);t.default=M}).call(t,n(187))},1299:function(e,t){e.exports={body:"_3awUtqrU",form:"uYf23hMC",footer:"_2XXxbSUP"}},1300:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,l,s,f,d,p=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),y=r(h),v=n(115),b=n(185),g=(n(1251),n(510)),_=n(186),w=n(1273),k=r(w),E=n(1278),C=(r(E),n(1234)),x=r(C),O=n(135),T=r(O),P=n(1301),S=r(P),j=(c=(0,b.connect)(function(e,t){return{me:(0,_.getProfile)(e)}},function(e){return{getUnlockToken:(0,v.bindActionCreators)(g.getUnlockToken,e)}}),l=(0,T.default)(S.default),c(s=l((d=f=function(t){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={areaCode:""},t.submit=t.submit.bind(t),t.sendCaptcha=t.sendCaptcha.bind(t),t}return u(n,t),m(n,[{key:"submit",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n,r,a,o,i,u,c,l,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,r=this.props.getUnlockToken,a=this.refs,o=a.select,i=a.captcha,i.value){t.next=5;break}return t.abrupt("return",i.focus());case 5:return t.next=7,r({args:{type:o.value,captcha:i.value}});case 7:u=t.sent,c=p(u,2),l=c[0],s=c[1],l?Toastify({text:l.message,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast():(Toastify({text:"提交成功",duration:3e3,backgroundColor:"linear-gradient(to right, #50c64a, #40aa33)"}).showToast(),e("#unlock-token-modal").modal("hide"));case 12:case"end":return t.stop()}},t,this)}));return t}()},{key:"sendCaptcha",value:function(e){e({id:"unlock-token",args:{type:"phone"==this.refs.select.value?"phone-unlock-token":"email-unlock-token"},fields:"success"})}},{key:"render",value:function(){var e=this.props.me;return y.default.createElement(x.default,{id:"unlock-token-modal",title:"身份验证",body:y.default.createElement("div",{styleName:"body"},y.default.createElement("div",null,"为了保护你的帐号安全，请验证身份，验证成功后进行下一步操作"),y.default.createElement("br",null),y.default.createElement("div",{className:"form-group"},y.default.createElement("div",{className:"container"},y.default.createElement("div",{className:"row"},y.default.createElement("select",{className:"form-control",id:"exampleFormControlSelect1",ref:"select"},e.phone?y.default.createElement("option",{value:"phone"},"使用 ",e.phone," 验证"):null,e.email?y.default.createElement("option",{value:"email"},"使用 ",e.email," 验证"):null)))),y.default.createElement("div",{className:"form-group"},y.default.createElement("input",{className:"form-control",type:"text",placeholder:"输入6位数验证码",ref:"captcha"}),y.default.createElement("div",null,y.default.createElement(k.default,{onClick:this.sendCaptcha})))),footer:y.default.createElement("div",null,y.default.createElement("a",{className:"btn btn-primary",href:"javascript:void(0);",onClick:this.submit},"提交"))})}}]),n}(h.Component),f.defaultProps={show:function(){},hide:function(){}},s=d))||s)||s);t.default=j}).call(t,n(187))},1301:function(e,t){e.exports={body:"uNUSp6om",form:"_3-2aF2PI",footer:"_30U-q_-X"}}});