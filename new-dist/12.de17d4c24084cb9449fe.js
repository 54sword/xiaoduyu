webpackJsonp([12],{1200:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Notifications=void 0;var l,c,u,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(1),d=a(f),p=n(1218),m=a(p),h=n(1217),v=a(h),_=n(1309),y=a(_),b=n(115),g=n(185),w=n(186),E=n(286),O=n(503),k=n(502),P=n(135),N=a(P),j=n(1313),x=a(j),M=t.Notifications=(l=(0,g.connect)(function(e,t){return{me:(0,w.getProfile)(e),unreadNotice:(0,E.getUnreadNotice)(e),list:(0,k.getNotificationByName)(e,"index")}},function(e){return{loadNewNotifications:(0,b.bindActionCreators)(O.loadNewNotifications,e)}}),c=(0,N.default)(x.default),l(u=c(u=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.list,n=e.unreadNotice,a=e.loadNewNotifications;n.length>0&&t&&t.data&&t.data.length>0&&a({name:"index"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.me,a=t.list,o=t.unreadNotice;return d.default.createElement("div",null,d.default.createElement(v.default,{title:"通知"}),o.length>0&&a&&a.data&&a.data.length>0?d.default.createElement("div",{onClick:function(){e.componentDidMount()},styleName:"unread-tip"},"你有 ",o.length," 未读通知"):null,d.default.createElement(y.default,{name:"index",filters:{variables:{addressee_id:n._id,sort_by:"create_at"}}}))}}]),t}(f.Component))||u)||u);t.default=(0,m.default)(M)},1217:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Meta=void 0;var l,c,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),f=a(s),d=n(489),p=a(d),m=(n(115),n(185)),h=n(286),v=n(117),_=t.Meta=(l=(0,m.connect)(function(e,t){return{unreadNotice:(0,h.getUnreadNotice)(e)}},function(e){return{}}))(c=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){var e={},t=this.props,n=t.title,a=t.description,o=t.canonical,r=t.meta,i=t.link,l=t.unreadNotice;return e.title=n?n+" - "+v.name:v.name,a&&(e.description=a),o&&(e.canonical=o),r&&(e.meta=r),i&&(e.link=i),l&&l.length>0&&(e.title="("+l.length+"条通知) "+e.title),f.default.createElement(p.default,null,f.default.createElement("title",null,l&&l.length>0?"("+l.length+"条通知)":"",n||v.name,n?" - "+v.name:""),this.props.children)}}]),t}(s.Component))||c;t.default=_},1218:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(o,r){try{var i=t[o](r),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),f=a(s),d=n(115),p=n(185),m=n(1219),h=n(1220),v=n(488),_=a(v),y=n(487),b=a(y),g=function(e){var t,n,a;return e.loadData||(e.loadData=function(e){e.store,e.match;return new Promise(function(){var e=l(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({code:200});case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())}),(0,p.connect)(function(e,t){return{}},function(e){return{saveScrollPosition:(0,d.bindActionCreators)(m.saveScrollPosition,e),setScrollPosition:(0,d.bindActionCreators)(m.setScrollPosition,e),addVisitHistory:(0,d.bindActionCreators)(h.addVisitHistory,e)}})((a=n=function(t){function n(e){o(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={notFoundPgae:""},t}return i(n,t),u(n,[{key:"componentWillMount",value:function(){var e=this.props.location,t=(e.pathname,e.search);if(this.props.location.params=t?(0,b.default)(t):{},this.props.staticContext){var n=this.props.staticContext,a=n.code,o=n.text;404==a&&(this.state.notFoundPgae=o||"404 NOT FOUND")}}},{key:"componentDidMount",value:function(){var e=this.props.location,t=e.pathname,n=e.search;this.props.setScrollPosition(t+n),this.props.addVisitHistory(t+n)}},{key:"componentWillReceiveProps",value:function(e){this.props.location.pathname+this.props.location.search!=e.location.pathname+e.location.search&&(this.componentWillUnmount(),this.props=e,this.componentDidMount())}},{key:"componentWillUnmount",value:function(){var e=this.props.location,t=e.pathname,n=e.search;this.props.saveScrollPosition(t+n)}},{key:"render",value:function(){var t=this,n=this.state.notFoundPgae;return f.default.createElement("div",{className:"container"},n?f.default.createElement("div",null,n):f.default.createElement(e,c({},this.props,{notFoundPgae:function(e){t.setState({notFoundPgae:e||"404 NOT FOUND"})}})))}}]),n}(f.default.Component),n.defaultProps={loadData:function(t){var n=t.store,a=t.match;return new Promise(function(t,o){var r=[];_.default.loadData&&r.push(_.default.loadData({store:n,match:a})),e.loadData&&r.push(e.loadData({store:n,match:a})),Promise.all(r).then(function(n){t(e.loadData?n[n.length-1]:{code:200})})})}},t=a))||t};t.default=g},1219:function(e,t,n){"use strict";function a(e){return function(t,n){t({type:"SET_SCROLL_POSITION",name:e})}}function o(e){return function(t,n){t({type:"SAVE_SCROLL_POSITION",name:e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.setScrollPosition=a,t.saveScrollPosition=o},1220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.addVisitHistory=function(e){return function(t){t({type:"ADD_HISTORY",page:e})}}},1221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=function(){this.devices={1:"unknow",2:"windows",3:"mac",4:"ipad",5:"iphone",6:"android"},this.show={1:"",2:"",3:"",4:"来自 iPad",5:"来自 iPhone",6:"来自 Android"}};return e.prototype.getCurrentDeviceId=function(){if("undefined"==typeof window||"undefined"==typeof document)return 1;var e="unknow",t=navigator.platform,n=navigator.userAgent.toLowerCase(),a={windows:0==t.indexOf("Win"),mac:0==t.indexOf("Mac"),ipad:"ipad"==n.match(/ipad/i),iphone:"iphone os"==n.match(/iphone os/i),android:"android"==n.match(/android/i)};for(var o in a)a[o]&&(e=o);for(var o in this.devices)if(this.devices[o]==e)return o;return 1},e.prototype.getNameByDeviceId=function(e){return this.show[e]},e.prototype.isMobileDevice=function(){var e=this.getCurrentDeviceId();return 5==e||6==e},new e}();t.default=a},1225:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length,a="",o=0;o<e;o++)a+=t.charAt(Math.floor(Math.random()*n));return a}Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLText=void 0;var u,s,f,d,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=n(1),h=a(m),v=n(135),_=a(v),y=n(1248),b=a(y),g=n(1221),w=a(g),E=n(1249),O=a(E),k=function(e){if(!e)return"";e=e.replace("&nbsp;"," ");var t=/<a(.*?)>(.*?)<\/a>/gi,n=[],a=e.match(t);a&&a.length>0&&e.match(t).map(function(t){var a="#"+c(18)+"#";n.push({id:a,value:t}),e=e.replace(t,a)});var o=/(http:\/\/|https:\/\/|www\.|magnet\:\?xt\=)(.*?)(?=\s|http|https|\)|\>|\]|\}|\<|$)/gi,r=e.match(o);if(r&&r.length>0){var i=function(e,t){return t.length-e.length};r=r.sort(i);var l=[];r.map(function(t){var n="#"+c(18)+"#";l.push({id:n,value:t}),e=e.replace(t,n)}),l.map(function(t){e=w.default.isMobileDevice()?e.replace(t.id,"<a href="+t.value+' rel="nofollow">'+t.value+"</a>"):e.replace(t.id,"<a href="+t.value+' target="_blank" rel="nofollow">'+t.value+"</a>")})}return n.length>0&&n.map(function(t){e=e.replace(t.id,t.value)}),e},P=function(e){e=k(e);var t=/\<div data\-youku\=\"(.*?)\"\>\<\/div\>/g,n=e.match(t);n&&n.length>0&&n.map(function(n){var a=n.split(t)[1],o="//player.youku.com/embed/"+a,r='<iframe ref="iframe" src="'+o+'"></iframe>';e=e.replace(n,'<div class="load-demand" data-load-demand=\''+r+"'></div>")}),t=/\<div data\-qq\=\"(.*?)\"\>\<\/div\>/g,n=e.match(t),n&&n.length>0&&n.map(function(n){var a=n.split(t)[1],o="//v.qq.com/iframe/player.html?vid="+a+"&tiny=0&auto=0",r='<iframe ref="iframe" src="'+o+'"></iframe>';e=e.replace(n,'<div class="load-demand" data-load-demand=\''+r+"'></div>")}),t=/\<div data\-youtube\=\"(.*?)\"\>\<\/div\>/g,n=e.match(t),n&&n.length>0&&n.map(function(n){var a=n.split(t)[1],o="//www.youtube.com/embed/"+a,r='<iframe ref="iframe" src="'+o+'"></iframe>';e=e.replace(n,'<div class="load-demand" data-load-demand=\''+r+"'></div>")}),t=/\<img src\=\"(.*?)\"\>/g;var a=[].concat(l(new Set(e.match(t)))),o=O.default.abstractImagesFromHTML(e);o.map(function(e,t){o[t]=e.split("?")[0]}),o="['"+o.join("','")+"']",a&&a.length>0&&a.map(function(t,n){var a=t;a=a.replace(/\?/g,"\\?"),e=e.replace(new RegExp(a,"gm"),'<div onclick="webPictureViewer('+o+","+n+');" class="load-demand text-center" data-load-demand=\''+t+"'></div>")}),t=/\<div data\-163musicsong\=\"(.*?)\"\>/g;var r=e.match(t);return r&&r.length>0&&r.map(function(n){var a=n.split(t)[1],o="//music.163.com/outchain/player?type=2&id="+a+"&auto=0&height=66";e=e.replace(n,'<iframe type="music" ref="iframe" src="'+o+'" height="86"></iframe>')}),t=/\<div data\-163musicplaylist\=\"(.*?)\"\>/g,r=e.match(t),r&&r.length>0&&r.map(function(n){var a=n.split(t)[1],o="//music.163.com/outchain/player?type=0&id="+a+"&auto=0&height=430";e=e.replace(n,'<iframe type="music" ref="iframe" src="'+o+'" height="450"></iframe>')}),e},N=t.HTMLText=(u=(0,_.default)(b.default))((d=f=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={content:""},n}return i(t,e),p(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.content;e.hiddenHalf&&t&&(t=t.substr(0,parseInt(t.length/2))),this.state.content=P(t)}},{key:"componentWillReceiveProps",value:function(e){this.props.content!=e.content&&(this.props=e,this.componentWillMount())}},{key:"render",value:function(){var e=this.state.content,t=this.props.hiddenHalf;return h.default.createElement("div",null,h.default.createElement("div",{ref:"contentDom",className:b.default.content,dangerouslySetInnerHTML:{__html:e}}),t&&e?h.default.createElement("div",{styleName:"more-tips"},h.default.createElement("div",null,h.default.createElement("span",{styleName:"lock"},"剩余50%的内容登陆后可查看")),h.default.createElement("div",{styleName:"sign"},h.default.createElement("a",{href:"javascript:void(0)",className:"btn btn-outline-primary btn-sm","data-toggle":"modal","data-target":"#sign","data-type":"sign-up"},"注册"),h.default.createElement("a",{href:"javascript:void(0)",className:"btn btn-outline-primary btn-sm","data-toggle":"modal","data-target":"#sign","data-type":"sign-in"},"登录"))):null)}}]),t}(m.Component),f.defaultProps={hiddenHalf:!1},s=d))||s;t.default=N},1226:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;var i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(c),s=n(136),f=t.Pagination=(0,s.withRouter)(i=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.location,n=e.count,a=e.pageSize,o=e.pageNumber;if(!n)return"";var r=t.pathname,i=t.search,l=Math.ceil(n/a);if(1==l)return"";i=i.split("?")[1]||"";var c=[];i.split("&").map(function(e){e&&-1==e.indexOf("page_number")&&c.push(e)}),i=i.replace("page_number="+o,"");var f=function(e){var t=e<=1?"":"page_number="+e;return 0==c.length?r+(t?"?"+t:""):r+"?"+[].concat(c,[t]).join("&")},d=o>1?f(o-1):"",p=o+1<=l?f(o+1):"";return u.default.createElement("nav",{"aria-label":"Page navigation",className:"mt-3"},u.default.createElement("ul",{className:"pagination justify-content-center"},u.default.createElement("li",{className:"page-item "+(d?"":"disabled")},u.default.createElement(s.Link,{className:"page-link",to:d,"aria-label":"Previous"},u.default.createElement("span",{"aria-hidden":"true"},"«"),u.default.createElement("span",{className:"sr-only"},"Previous"))),function(){for(var e=[],t=o-5>=1?o-5:0,n=o+4>=l?l:o+4,a=t;a<n;a++)e.push(u.default.createElement("li",{className:"page-item "+(o-1==a?"active":""),key:a},u.default.createElement(s.Link,{className:"page-link",to:f(a+1)},a+1)));return e}(),u.default.createElement("li",{className:"page-item "+(p?"":"disabled")},u.default.createElement(s.Link,{className:"page-link",to:p,"aria-label":"Next"},u.default.createElement("span",{"aria-hidden":"true"},"»"),u.default.createElement("span",{className:"sr-only"},"Next")))))}}]),t}(c.Component))||i;t.default=f},1242:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,c,u,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(1),p=a(d),m=n(135),h=a(m),v=n(1250),_=a(v),y=(l=(0,h.default)(_.default))((s=u=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),f(t,[{key:"render",value:function(){return this.props.loading?p.default.createElement("div",{styleName:"box"},p.default.createElement("div",{styleName:"ball-pulse-sync"},p.default.createElement("div",null),p.default.createElement("div",null),p.default.createElement("div",null))):""}}]),t}(p.default.PureComponent),u.defaultProps={loading:!1},c=s))||c;t.default=y},1248:function(e,t){e.exports={content:"_3IcB81fO","more-tips":"iQMbVnVf",lock:"_2fRLlZ30",sign:"_36jdoYdF"}},1249:function(e,t,n){"use strict";t.abstractImagesFromHTML=function(e){for(var t=/<img(?:(?:".*?")|(?:'.*?')|(?:[^>]*?))*>/gi,n=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,a=[],o=void 0;o=t.exec(e);){var r=o[0].match(n);r&&r[1]&&a.push(r[1])}return a}},1250:function(e,t){e.exports={box:"_2dlSQZYR",more:"_3RuLAZJS","ball-pulse-sync":"_1C-w_zdh"}},1309:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,c,u,s,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=n(1),m=a(p),h=n(78),v=a(h),_=n(136),y=n(115),b=n(185),g=n(503),w=n(502),E=(n(492),n(1242)),O=a(E),k=n(1225),P=(a(k),n(1226)),N=(a(P),n(1310)),j=a(N),x=n(135),M=a(x),D=n(1312),C=a(D),L=(l=(0,b.connect)(function(e,t){return{notification:(0,w.getNotificationByName)(e,t.name)}},function(e){return{loadNotifications:(0,y.bindActionCreators)(g.loadNotifications,e),updateNotification:(0,y.bindActionCreators)(g.updateNotification,e)}}),c=(0,M.default)(C.default),(0,_.withRouter)(u=l(u=c((f=s=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLoad=n.handleLoad.bind(n),n.updateNotification=n.updateNotification.bind(n),n}return i(t,e),d(t,[{key:"componentDidMount",value:function(){this.props.notification.data||this.handleLoad(),ArriveFooter.add(this.props.name,this.handleLoad)}},{key:"componentWillUnmount",value:function(){ArriveFooter.remove(this.props.name)}},{key:"componentWillReceiveProps",value:function(e){if(e.name!=this.props.name){(0,this.props.loadNotifications)({name:e.name,filters:e.filters,restart:!0})}}},{key:"updateNotification",value:function(e,t){var n=this.props.updateNotification;t._id=e,n(t)}},{key:"handleLoad",value:function(){var e=this.props,t=e.name,n=e.filters;(0,e.loadNotifications)({name:t,filters:n})}},{key:"render",value:function(){var e=this.props,t=e.notification,n=(e.location,t.data),a=t.loading;t.more,t.count,t.filters;return m.default.createElement("div",null,m.default.createElement("div",{className:"list-group",styleName:"list"},n&&n.map(function(e){return m.default.createElement(j.default,{notification:e,key:e._id})})),m.default.createElement(O.default,{loading:a}))}}]),t}(p.Component),s.propTypes={name:v.default.string.isRequired,filters:v.default.object.isRequired,location:v.default.object.isRequired,notification:v.default.object.isRequired,loadNotifications:v.default.func.isRequired},u=f))||u)||u)||u);t.default=L},1310:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,c,u,s,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(1),p=a(d),m=n(78),h=a(m),v=n(136),_=(n(115),n(185),n(503),n(502),n(492)),y=n(1242),b=(a(y),n(1225)),g=a(b),w=n(1226),E=(a(w),n(135)),O=a(E),k=n(1311),P=a(k),N=(l=(0,O.default)(P.default))((s=u=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.expandComment=n.expandComment.bind(n),n}return i(t,e),f(t,[{key:"expandComment",value:function(){var e=this.props.notification;e.expandComment=!e.expandComment,this.setState({})}},{key:"render",value:function(){var e=this.props.notification,t=e,n=null,a=null;switch(t.sender_id&&t.sender_id.avatar_url&&(a=p.default.createElement("i",{className:"load-demand","data-load-demand":"<img class="+P.default.avatar+" src="+t.sender_id.avatar_url+" />"})),t.type){case"follow-you":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 关注了你"));break;case"follow-posts":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 关注了你的",p.default.createElement(v.Link,{to:"/posts/"+t.posts_id._id},t.posts_id.title),1==t.posts_id.type?"分享":"提问"));break;case"like-posts":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 赞了你的",p.default.createElement(v.Link,{to:"/posts/"+t.posts_id._id},t.posts_id.title),1==t.posts_id.type?"分享":"提问"));break;case"reply":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 回复了你的",p.default.createElement(v.Link,{to:"/comment/"+t.comment_id.parent_id._id},t.comment_id.reply_id?t.comment_id.reply_id.content_trim:t.comment_id.parent_id.content_trim),t.comment_id.reply_id?"回复":"评论"),p.default.createElement("div",{styleName:"content"},p.default.createElement(g.default,{content:t.comment_id.content_html})));break;case"comment":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 评论了你的",p.default.createElement(v.Link,{to:"/posts/"+t.comment_id.posts_id._id},t.comment_id.posts_id.title),1==t.comment_id.posts_id.type?"分享":"提问"),p.default.createElement("div",{styleName:"content",onClick:this.expandComment},p.default.createElement(g.default,{content:t.comment_id.content_html})));break;case"like-reply":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 赞了你的",p.default.createElement(v.Link,{to:"/comment/"+t.comment_id.parent_id._id},t.comment_id.content_trim),"回复"));break;case"like-comment":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 赞了你的",p.default.createElement(v.Link,{to:"/comment/"+t.comment_id._id},t.comment_id.content_trim),"评论"));break;case"new-comment":n=p.default.createElement("div",null,p.default.createElement("div",{styleName:"header"},p.default.createElement(v.Link,{to:"/people/"+t.sender_id._id},a,t.sender_id.nickname),(0,_.DateDiff)(t.create_at)," 评论了",p.default.createElement(v.Link,{to:"/posts/"+t.comment_id.posts_id._id},t.comment_id.posts_id.title),1==t.comment_id.posts_id.type?"分享":"提问"),p.default.createElement("div",{styleName:"content"},p.default.createElement(v.Link,{to:"/comment/"+t.comment_id._id},t.comment_id.content_trim)))}return n&&(n=p.default.createElement("div",{key:t._id,className:"list-group-item",styleName:t.has_read?"":"unread"},n)),n}}]),t}(d.Component),u.propTypes={notification:h.default.object.isRequired},c=s))||c;t.default=N},1311:function(e,t){e.exports={unread:"_1cIxbKZ6",new:"_1HCIPk-_","create-at":"XQ86hrSz",header:"_1fRHzG0H",avatar:"_3hB7080u",content:"_2E4ewtgE",footer:"_3bo5HbsX",actions:"_1lYNOze1",content_trim:"_2ImKsVFA",nothing:"_2vqFeW7b"}},1312:function(e,t){e.exports={list:"W49TFFAl",new:"_1kIBNJq1","create-at":"_1asKIFED",header:"_1GSBYfxV",avatar:"_1nAdrfE0",content:"_3HzYOZ7G",footer:"_3mQvMwpQ",actions:"_2-k3djiQ",nothing:"_37oGr3LQ"}},1313:function(e,t){e.exports={"unread-tip":"_1SdUu5O6"}}});