webpackJsonp([19],{1202:function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var u=e[o](a),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Forgot=void 0;var c,s,l=function(){function t(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=n(1),d=r(p),h=n(287),v=n(115),m=n(185),y=n(1315),b=n(1218),w=r(b),g=n(1217),_=r(g),P=n(1273),O=r(P),x=e.Forgot=(c=(0,m.connect)(function(t,e){return{}},function(t){return{forgot:(0,v.bindActionCreators)(y.forgot,t)}}),(0,h.withRouter)(s=c(s=function(e){function n(t){a(this,n);var e=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.submit=e.submit.bind(e),e.sendCaptcha=e.sendCaptcha.bind(e),e}return i(n,e),f(n,[{key:"submit",value:function(){function e(t){return n.apply(this,arguments)}var n=o(regeneratorRuntime.mark(function e(n){var r,o,a,u,i,c,s,f,p,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=this.refs,o=r.account,a=r.captcha,u=r.newPassword,i=r.confirmNewPassword,c=this.props.forgot,o.value){e.next=5;break}return e.abrupt("return",o.focus());case 5:if(a.value){e.next=7;break}return e.abrupt("return",a.focus());case 7:if(u.value){e.next=9;break}return e.abrupt("return",u.focus());case 9:if(i.value){e.next=11;break}return e.abrupt("return",i.focus());case 11:if(u.value==i.value){e.next=13;break}return e.abrupt("return",alert("两次密码输入不一致"));case 13:return s={captcha:a.value,new_password:u.value},-1!=o.value.indexOf("@")?s.email=o.value:s.phone=o.value,e.next=17,c({args:s});case 17:return f=e.sent,p=l(f,2),d=p[0],h=p[1],d?Toastify({text:d.message,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast():h&&h.success&&(Toastify({text:"修改成功，请登陆",duration:7e3,backgroundColor:"linear-gradient(to right, #50c64a, #40aa33)"}).showToast(),this.props.history.push("/"),setTimeout(function(){t("#sign").modal({show:!0},{"data-type":"sign-in"})},500)),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"sendCaptcha",value:function(t){var e=this.refs.account;if(!e.value)return e.focus();var n={type:"forgot"};-1!=e.value.indexOf("@")?n.email=e.value:n.phone=e.value,t({args:n})}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(_.default,{title:"忘记密码"}),d.default.createElement("form",{onSubmit:this.submit},d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{htmlFor:"exampleInputEmail1"},"请输入你的注册手机号或邮箱"),d.default.createElement("input",{type:"text",className:"form-control",placeholder:"请输入你的注册手机号或邮箱",ref:"account"})),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{htmlFor:"exampleInputPassword1"},"输入验证码"),d.default.createElement(O.default,{onClick:this.sendCaptcha}),d.default.createElement("input",{type:"text",className:"form-control",placeholder:"输入验证码",ref:"captcha"})),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{htmlFor:"exampleInputPassword1"},"新密码"),d.default.createElement("input",{type:"password",className:"form-control",placeholder:"新密码",ref:"newPassword"})),d.default.createElement("div",{className:"form-group"},d.default.createElement("label",{htmlFor:"exampleInputPassword1"},"重复新密码"),d.default.createElement("input",{type:"password",className:"form-control",placeholder:"重复新密码",ref:"confirmNewPassword"})),d.default.createElement("button",{type:"submit",className:"btn btn-primary"},"提交")))}}]),n}(p.Component))||s)||s);e.default=(0,w.default)(x)}).call(e,n(187))},1217:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Meta=void 0;var i,c,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),f=r(l),p=n(489),d=r(p),h=(n(115),n(185)),v=n(286),m=n(117),y=e.Meta=(i=(0,h.connect)(function(t,e){return{unreadNotice:(0,v.getUnreadNotice)(t)}},function(t){return{}}))(c=function(t){function e(t){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return u(e,t),s(e,[{key:"render",value:function(){var t={},e=this.props,n=e.title,r=e.description,o=e.canonical,a=e.meta,u=e.link,i=e.unreadNotice;return t.title=n?n+" - "+m.name:m.name,r&&(t.description=r),o&&(t.canonical=o),a&&(t.meta=a),u&&(t.link=u),i&&i.length>0&&(t.title="("+i.length+"条通知) "+t.title),f.default.createElement(d.default,null,f.default.createElement("title",null,i&&i.length>0?"("+i.length+"条通知)":"",n||m.name,n?" - "+m.name:""),this.props.children)}}]),e}(l.Component))||c;e.default=y},1218:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var u=e[o](a),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),f=r(l),p=n(115),d=n(185),h=n(1219),v=n(1220),m=n(488),y=r(m),b=n(487),w=r(b),g=function(t){var e,n,r;return t.loadData||(t.loadData=function(t){t.store,t.match;return new Promise(function(){var t=i(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e({code:200});case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())}),(0,d.connect)(function(t,e){return{}},function(t){return{saveScrollPosition:(0,p.bindActionCreators)(h.saveScrollPosition,t),setScrollPosition:(0,p.bindActionCreators)(h.setScrollPosition,t),addVisitHistory:(0,p.bindActionCreators)(v.addVisitHistory,t)}})((r=n=function(e){function n(t){o(this,n);var e=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={notFoundPgae:""},e}return u(n,e),s(n,[{key:"componentWillMount",value:function(){var t=this.props.location,e=(t.pathname,t.search);if(this.props.location.params=e?(0,w.default)(e):{},this.props.staticContext){var n=this.props.staticContext,r=n.code,o=n.text;404==r&&(this.state.notFoundPgae=o||"404 NOT FOUND")}}},{key:"componentDidMount",value:function(){var t=this.props.location,e=t.pathname,n=t.search;this.props.setScrollPosition(e+n),this.props.addVisitHistory(e+n)}},{key:"componentWillReceiveProps",value:function(t){this.props.location.pathname+this.props.location.search!=t.location.pathname+t.location.search&&(this.componentWillUnmount(),this.props=t,this.componentDidMount())}},{key:"componentWillUnmount",value:function(){var t=this.props.location,e=t.pathname,n=t.search;this.props.saveScrollPosition(e+n)}},{key:"render",value:function(){var e=this,n=this.state.notFoundPgae;return f.default.createElement("div",{className:"container"},n?f.default.createElement("div",null,n):f.default.createElement(t,c({},this.props,{notFoundPgae:function(t){e.setState({notFoundPgae:t||"404 NOT FOUND"})}})))}}]),n}(f.default.Component),n.defaultProps={loadData:function(e){var n=e.store,r=e.match;return new Promise(function(e,o){var a=[];y.default.loadData&&a.push(y.default.loadData({store:n,match:r})),t.loadData&&a.push(t.loadData({store:n,match:r})),Promise.all(a).then(function(n){e(t.loadData?n[n.length-1]:{code:200})})})}},e=r))||e};e.default=g},1219:function(t,e,n){"use strict";function r(t){return function(e,n){e({type:"SET_SCROLL_POSITION",name:t})}}function o(t){return function(e,n){e({type:"SAVE_SCROLL_POSITION",name:t})}}Object.defineProperty(e,"__esModule",{value:!0}),e.setScrollPosition=r,e.saveScrollPosition=o},1220:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.addVisitHistory=function(t){return function(e){e({type:"ADD_HISTORY",page:t})}}},1273:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var u=e[o](a),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c,s,l,f,p,d=function(){function t(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),v=n(1),m=r(v),y=n(78),b=r(y),w=n(115),g=n(185),_=n(1274),P=n(135),O=r(P),x=n(1275),E=r(x),j=(c=(0,g.connect)(function(t,e){return{}},function(t){return{addCaptcha:(0,w.bindActionCreators)(_.addCaptcha,t)}}),s=(0,O.default)(E.default),c(l=s((p=f=function(t){function e(t){a(this,e);var n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={loading:!1,countdown:0},n.send=n.send.bind(n),n}return i(e,t),h(e,[{key:"send",value:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var n,r,o,a,u,i,c,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,r=this.props.addCaptcha,o=this.state,a=o.loading,u=o.countdown,!(a||u>0)){t.next=5;break}return t.abrupt("return");case 5:return this.setState({loading:!0}),t.next=8,r(e);case 8:if(i=t.sent,c=d(i,2),s=c[0],l=c[1],!s){t.next=16;break}return Toastify({text:s.message,duration:3e3,backgroundColor:"linear-gradient(to right, #ff6c6c, #f66262)"}).showToast(),this.setState({loading:!1}),t.abrupt("return");case 16:this.setState({loading:!1,countdown:60},function(){!function t(){if(0==n.state.countdown)return void n.setState({loading:!1});n.setState({countdown:n.state.countdown-1}),setTimeout(function(){t()},1e3)}()});case 17:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){var t=this,e=this.state.countdown;return m.default.createElement("a",{href:"javascript:void(0)",styleName:"captcha-button",onClick:function(){t.props.onClick(t.send)}},e>0?"发送成功 ("+e+")":"获取验证码")}}]),e}(v.Component),f.propTypes={onClick:b.default.func.isRequired},l=p))||l)||l);e.default=j},1274:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var u=e[o](a),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0}),e.addCaptcha=void 0;var o=function(){function t(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(116),u=function(t){return t&&t.__esModule?t:{default:t}}(a);e.addCaptcha=function(t){var e=t.id,n=void 0===e?(new Date).getTime():e,a=t.args,i=t.fields,c=void 0===i?"success":i;return function(t,e){return new Promise(function(){var i=r(regeneratorRuntime.mark(function r(i){var s,l,f,p,d;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=s||e().user.accessToken,r.next=3,(0,u.default)({type:"mutation",api:"addCaptcha",args:a,fields:c,headers:s?{AccessToken:s}:null});case 3:l=r.sent,f=o(l,2),p=f[0],d=f[1],d&&d._id&&d.url&&t({type:"ADD_CAPRCHA_ID",id:n,data:d}),i([p,d]);case 9:case"end":return r.stop()}},r,void 0)}));return function(t){return i.apply(this,arguments)}}())}}},1275:function(t,e){t.exports={"captcha-button":"_3_czJ2I_"}},1315:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,a){try{var u=e[o](a),i=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(i).then(function(t){r("next",t)},function(t){r("throw",t)});t(i)}return r("next")})}}Object.defineProperty(e,"__esModule",{value:!0}),e.forgot=void 0;var o=function(){function t(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(116),u=function(t){return t&&t.__esModule?t:{default:t}}(a);e.forgot=function(t){var e=t.args;return function(t,n){return new Promise(function(){var t=r(regeneratorRuntime.mark(function t(n){var r,a,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.default)({type:"mutation",api:"forgot",args:e,fields:"\n          success\n        "});case 2:r=t.sent,a=o(r,2),i=a[0],c=a[1],n([i,c]);case 7:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}())}}}});